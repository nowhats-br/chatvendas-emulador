import{R as t,d as S,j as e,M as B}from"./index-CzIT3y9u.js";import{T as d}from"./TemplateService-C5x210Bu.js";import{S as W}from"./ScheduleModal-CJese5U3.js";import{u as H}from"./useErrorHandler-DYXcaAmG.js";import"./LogService-D1NsVqvs.js";import"./MetricsService-D-XrjjcY.js";import"./ProductService-DJdeptBB.js";import"./CampaignService-CffCzaYt.js";const I=({size:o=16,className:r=""})=>t.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:r},t.createElement("path",{d:"M5 12h14"}),t.createElement("path",{d:"M12 5v14"})),P=({size:o=16,className:r=""})=>t.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:r},t.createElement("path",{d:"M3 6h18"}),t.createElement("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),t.createElement("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),t.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),t.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"})),z=({size:o=16,className:r=""})=>t.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:r},t.createElement("path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z"})),O=({size:o=16,className:r=""})=>t.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:r},t.createElement("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),t.createElement("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),t.createElement("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),t.createElement("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),t.createElement("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),t.createElement("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})),$=({size:o=16,className:r=""})=>t.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:r},t.createElement("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),t.createElement("circle",{cx:"9",cy:"9",r:"2"}),t.createElement("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})),R=({size:o=16,className:r=""})=>t.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:r},t.createElement("circle",{cx:"11",cy:"11",r:"8"}),t.createElement("path",{d:"m21 21-4.35-4.35"})),h=({size:o=16,className:r=""})=>t.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:r},t.createElement("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),t.createElement("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),t.createElement("path",{d:"M10 9H8"}),t.createElement("path",{d:"M16 13H8"}),t.createElement("path",{d:"M16 17H8"}));function Q(){var b,v,g,f;const[o,r]=t.useState([]),[l,C]=t.useState(""),[w,c]=t.useState(!1),[E,x]=t.useState(!1),[i,y]=t.useState({}),{showToast:u}=S(),{handleError:m}=H(),n=async()=>{try{x(!0);const[s,a]=await Promise.all([d.getAll(),Promise.resolve(d.getStats())]);r(s),y(a)}catch(s){m(s,"Erro ao carregar modelos")}finally{x(!1)}};t.useEffect(()=>(n(),window.addEventListener("template-update",n),()=>window.removeEventListener("template-update",n)),[]);const M=async s=>{if(confirm("Excluir este modelo?"))try{await d.delete(s),u("Modelo excluído com sucesso","success"),n()}catch(a){m(a,"Erro ao excluir modelo")}},j=async s=>{const a=prompt("Dê um nome para este modelo:");if(a)try{await d.create({name:a.trim(),type:s.type||"text",content:s.content||{text:"Novo modelo"},description:`Modelo ${s.type||"texto"} criado em ${new Date().toLocaleDateString()}`}),c(!1),u("Modelo criado com sucesso!","success"),n()}catch(T){m(T,"Erro ao criar modelo")}},D=async s=>{try{await d.duplicate(s),u("Modelo duplicado com sucesso!","success"),n()}catch(a){m(a,"Erro ao duplicar modelo")}},V=async s=>{try{await d.incrementUsage(s.id),u(`Modelo "${s.name}" selecionado para uso`,"success")}catch(a){m(a,"Erro ao usar modelo")}},N=()=>{c(!0)},_=s=>{switch(s){case"buttons":return e.jsxDEV(z,{size:20,className:"text-blue-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:167,columnNumber:34},this);case"list":return e.jsxDEV(O,{size:20,className:"text-green-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:168,columnNumber:31},this);case"media":case"carousel":return e.jsxDEV($,{size:20,className:"text-purple-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:170,columnNumber:35},this);case"text":return e.jsxDEV(h,{size:20,className:"text-gray-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:171,columnNumber:31},this);default:return e.jsxDEV(B,{size:20,className:"text-emerald-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:172,columnNumber:27},this)}},k=s=>{switch(s){case"buttons":return"Botões";case"list":return"Lista";case"media":return"Mídia";case"carousel":return"Carrossel";case"text":return"Texto";default:return s}},L=s=>{switch(s){case"buttons":return"bg-blue-100 text-blue-700 border-blue-200";case"list":return"bg-green-100 text-green-700 border-green-200";case"media":case"carousel":return"bg-purple-100 text-purple-700 border-purple-200";case"text":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-emerald-100 text-emerald-700 border-emerald-200"}},p=o.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.type.toLowerCase().includes(l.toLowerCase()));return e.jsxDEV("div",{className:"h-full flex flex-col bg-gray-50 overflow-hidden",children:[e.jsxDEV(W,{isOpen:w,onClose:()=>c(!1),onConfirm:j},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:205,columnNumber:7},this),e.jsxDEV("div",{className:"p-8 pb-4 shrink-0",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsxDEV(h,{className:"text-emerald-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:215,columnNumber:15},this),"Modelos de Mensagem"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:214,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500 mt-1",children:"Crie e gerencie templates para usar em campanhas e atendimentos."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:218,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:213,columnNumber:11},this),e.jsxDEV("button",{onClick:N,className:"bg-emerald-600 text-white px-4 py-2.5 rounded-lg flex items-center gap-2 hover:bg-emerald-700 font-bold shadow-sm transition-colors",children:[e.jsxDEV(I,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:224,columnNumber:13},this)," Novo Modelo"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:220,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:212,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxDEV("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:231,columnNumber:13},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-800",children:i.total||0},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxDEV("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Texto"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:235,columnNumber:13},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-800",children:((b=i.byType)==null?void 0:b.text)||0},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:236,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:234,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxDEV("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Botões"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:241,columnNumber:13},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-800",children:((v=i.byType)==null?void 0:v.buttons)||0},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:242,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:240,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxDEV("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Mídia"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:247,columnNumber:13},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-800",children:(((g=i.byType)==null?void 0:g.media)||0)+(((f=i.byType)==null?void 0:f.carousel)||0)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:248,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:246,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:255,columnNumber:13},this),e.jsxDEV("input",{type:"text",placeholder:"Buscar por nome ou tipo...",className:"w-full pl-10 p-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-colors",value:l,onChange:s=>C(s.target.value)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:256,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:254,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:211,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto px-8 pb-8",children:E?e.jsxDEV("div",{className:"flex items-center justify-center h-64",children:e.jsxDEV("div",{className:"flex flex-col items-center gap-3",children:[e.jsxDEV("div",{className:"w-8 h-8 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:270,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-500",children:"Carregando modelos..."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:271,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:269,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:268,columnNumber:11},this):p.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 border-2 border-dashed border-gray-200 rounded-xl",children:[e.jsxDEV(h,{size:48,className:"mb-4 opacity-50"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:276,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg font-medium",children:l?"Nenhum modelo encontrado":"Nenhum modelo criado"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:277,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm mt-1",children:l?"Tente buscar por outro termo":"Crie seu primeiro modelo de mensagem"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:280,columnNumber:13},this),!l&&e.jsxDEV("button",{onClick:N,className:"mt-4 text-emerald-600 font-bold hover:underline",children:"Criar primeiro modelo"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:284,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:275,columnNumber:11},this):e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(s=>e.jsxDEV("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all group",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-3",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"bg-gray-100 p-2 rounded-lg",children:_(s.type)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:298,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-gray-800 truncate",children:s.name},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:302,columnNumber:35},this),e.jsxDEV("span",{className:`text-xs font-bold px-2 py-0.5 rounded border ${L(s.type)}`,children:k(s.type)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:303,columnNumber:35},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:301,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:297,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>M(s.id),className:"text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all p-1 rounded hover:bg-red-50",title:"Excluir modelo",children:e.jsxDEV(P,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:313,columnNumber:31},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:308,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:296,columnNumber:23},this),e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-lg text-xs text-gray-600 h-20 overflow-hidden border border-gray-100 relative",children:[s.type==="text"?e.jsxDEV("p",{className:"line-clamp-3",children:s.content.text||"Conteúdo vazio"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:319,columnNumber:29},this):e.jsxDEV("pre",{className:"whitespace-pre-wrap text-[10px] leading-tight",children:JSON.stringify(s.content,null,1)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:321,columnNumber:29},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 h-4 bg-gradient-to-t from-gray-50 to-transparent pointer-events-none"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:325,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:317,columnNumber:23},this),e.jsxDEV("div",{className:"mt-3 pt-3 border-t border-gray-100 flex gap-2",children:[e.jsxDEV("button",{onClick:()=>V(s),className:"flex-1 py-2 text-xs font-medium text-gray-600 hover:bg-emerald-50 hover:text-emerald-600 rounded transition-colors",children:"Usar"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:329,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>c(!0),className:"flex-1 py-2 text-xs font-medium text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded transition-colors",children:"Editar"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:335,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>D(s.id),className:"flex-1 py-2 text-xs font-medium text-gray-600 hover:bg-purple-50 hover:text-purple-600 rounded transition-colors",children:"Duplicar"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:341,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:328,columnNumber:23},this)]},s.id,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:295,columnNumber:19},this))},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:293,columnNumber:11},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:266,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Modelos/page.tsx",lineNumber:204,columnNumber:5},this)}export{Q as default};
