import{R as n,j as e,a as S,r as T,u as Ae,b as De}from"./index-CzIT3y9u.js";import{attendanceService as O}from"./AttendanceService-DRbHJWGr.js";import{k as Ve}from"./KanbanService-CgFd_rGu.js";import{P as be}from"./ProductService-DJdeptBB.js";import{O as Pe}from"./OrderService-B3PyY6dO.js";import{S as Le}from"./ScheduleModal-CJese5U3.js";import{W as Z}from"./WhatsAppService-CPEuSYb2.js";import"./api-CgldurF4.js";import"./TemplateService-C5x210Bu.js";import"./LogService-D1NsVqvs.js";import"./MetricsService-D-XrjjcY.js";import"./CampaignService-CffCzaYt.js";const Me=({size:t=38,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 100 100",fill:"currentColor",className:s,style:{color:"#1e3a8a"}},n.createElement("path",{d:"M50 20c-16.5 0-30 13.5-30 30 0 5.6 1.5 10.9 4.3 15.4L20 80l14.6-4.3c4.5 2.8 9.8 4.3 15.4 4.3 16.5 0 30-13.5 30-30S66.5 20 50 20z"}),n.createElement("circle",{cx:"38",cy:"50",r:"3.5",fill:"white"}),n.createElement("circle",{cx:"50",cy:"50",r:"3.5",fill:"white"}),n.createElement("circle",{cx:"62",cy:"50",r:"3.5",fill:"white"}),n.createElement("path",{d:"M50 5C25.1 5 5 25.1 5 50v8c0 4.4 3.6 8 8 8h4S17 42 17 42h-4v-8c0-20.4 16.6-37 37-37s37 16.6 37 37v8h-4v24h4c4.4 0 8-3.6 8-8v-8c0-24.9-20.1-45-45-45z"}),n.createElement("path",{d:"M87 66v10c0 10.5-8.5 19-19 19H50.5c-2.8 0-5-2.2-5-5s2.2-5 5-5H68c5 0 9-4 9-9V66"})),We=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("circle",{cx:"11",cy:"11",r:"8"}),n.createElement("path",{d:"m21 21-4.35-4.35"})),Se=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})),Be=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}),n.createElement("path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}),n.createElement("path",{d:"M10 12h4"})),je=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("path",{d:"M12 8V4H8"}),n.createElement("rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}),n.createElement("path",{d:"M2 14h2"}),n.createElement("path",{d:"M20 14h2"}),n.createElement("path",{d:"M15 13v2"}),n.createElement("path",{d:"M9 13v2"})),_e=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("path",{d:"m3 11 18-5v12L3 14v-3z"}),n.createElement("path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6"})),Re=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.createElement("path",{d:"M12 6v6l4 2"})),Te=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.createElement("circle",{cx:"12",cy:"7",r:"4"})),Ie=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})),$e=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),n.createElement("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})),ze=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("path",{d:"M12 13 2 6l10-4 10 4Z"}),n.createElement("path",{d:"m2 6 10 7 10-7"}),n.createElement("path",{d:"M2 6v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6"})),Fe=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("path",{d:"M19 7V6a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1v-2a2 2 0 0 0-2-2H2"}),n.createElement("path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"})),Oe=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),n.createElement("path",{d:"M9 3v18"}),n.createElement("path",{d:"M3 9h18"}),n.createElement("path",{d:"M3 15h18"})),He=({size:t=16,className:s="",title:i=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s,title:i},n.createElement("path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"}),n.createElement("path",{d:"M13 5v2"}),n.createElement("path",{d:"M13 17v2"}),n.createElement("path",{d:"M13 11v2"})),qe={chatbot:{icon:je,label:"Bot"},campaign:{icon:_e,label:"Campanha"},followup:{icon:Re,label:"Follow-up"},organic:{icon:Te,label:"OrgÃ¢nico"}},Ue={pending:{color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-400"},open:{color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-400"},resolved:{color:"text-green-600",bg:"bg-green-50",border:"border-green-400"}};function Qe({tickets:t,activeTab:s,onTabChange:i,selectedTicketId:a,onSelectTicket:g,onOpenTicket:u}){const[C,k]=n.useState(""),I=t.filter(r=>{const G=r.status===s,f=r.name.toLowerCase().includes(C.toLowerCase())||r.phoneNumber.includes(C);return G&&f}),R={pending:t.filter(r=>r.status==="pending").length,open:t.filter(r=>r.status==="open").length,resolved:t.filter(r=>r.status==="resolved").length};return e.jsxDEV("div",{className:"w-[340px] h-full bg-[#f8f9fa] dark:bg-[#0a0a0a] border-r border-gray-200 dark:border-[#222] flex flex-col transition-colors duration-300",children:[e.jsxDEV("div",{className:"p-4 bg-white dark:bg-[#111] border-b border-gray-100 dark:border-[#222] shrink-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"font-bold text-gray-800 dark:text-gray-100 text-lg",children:"Atendimentos"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:186,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-1 text-gray-500 dark:text-gray-400",children:e.jsxDEV("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-[#222] rounded-lg transition-colors",children:e.jsxDEV(Se,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:188,columnNumber:105},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:188,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:187,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:185,columnNumber:9},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(We,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:194,columnNumber:11},this),e.jsxDEV("input",{type:"text",className:"block w-full pl-9 pr-3 py-2.5 border border-gray-200 dark:border-[#333] rounded-xl bg-gray-50 dark:bg-[#1c1c1c] text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none placeholder-gray-400 dark:text-gray-200 transition-all",placeholder:"Buscar nome ou telefone...",value:C,onChange:r=>k(r.target.value)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:195,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:193,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:184,columnNumber:7},this),e.jsxDEV("div",{className:"flex px-2 pt-2 gap-1 bg-[#f8f9fa] dark:bg-[#0a0a0a] shrink-0 border-b border-gray-200 dark:border-[#222]",children:[{id:"open",label:"Abertos",count:R.open},{id:"pending",label:"Pendentes",count:R.pending},{id:"resolved",label:"Resolvidos",count:R.resolved}].map(r=>e.jsxDEV("button",{onClick:()=>i(r.id),className:S("flex-1 pb-3 text-xs font-bold transition-all relative",s===r.id?"text-emerald-600 dark:text-emerald-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700"),children:[e.jsxDEV("div",{className:"flex flex-col items-center gap-1",children:[e.jsxDEV("span",{children:r.label},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:223,columnNumber:15},this),e.jsxDEV("span",{className:S("text-[10px] px-1.5 rounded-full",s===r.id?"bg-emerald-100 text-emerald-700":"bg-gray-200 text-gray-600"),children:r.count},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:224,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:222,columnNumber:13},this),s===r.id&&e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-emerald-500 rounded-t-full"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:230,columnNumber:15},this)]},r.id,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:212,columnNumber:11},this))},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:206,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-[#333]",children:I.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-gray-600",children:[e.jsxDEV(Be,{size:32,className:"mb-2 opacity-50"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:240,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm font-medium",children:"Nenhum ticket nesta aba."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:241,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:239,columnNumber:11},this):I.map(r=>{qe[r.origin].icon;const f=Ue[r.status];return e.jsxDEV("div",{onClick:()=>g(r.id),className:S("relative bg-white dark:bg-[#111] rounded-xl p-3 border shadow-sm transition-all duration-200 cursor-pointer group hover:shadow-md min-h-[120px]",a===r.id?"border-emerald-500 ring-1 ring-emerald-500 bg-emerald-50/10 dark:bg-emerald-900/10":"border-gray-100 dark:border-[#222] hover:border-gray-300",r.origin==="organic"&&"hover:bg-green-50/50 dark:hover:bg-green-900/10 hover:border-green-200",r.origin==="chatbot"&&"hover:bg-blue-50/50 dark:hover:bg-blue-900/10 hover:border-blue-200",r.origin==="campaign"&&"hover:bg-purple-50/50 dark:hover:bg-purple-900/10 hover:border-purple-200",r.origin==="followup"&&"hover:bg-orange-50/50 dark:hover:bg-orange-900/10 hover:border-orange-200"),children:[e.jsxDEV("div",{className:S("absolute left-0 top-2 bottom-2 w-1 rounded-r-full opacity-80",f.bg==="bg-yellow-50"?"bg-yellow-400":f.bg==="bg-blue-50"?"bg-blue-400":"bg-green-400")},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:266,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-1.5 mb-1.5 ml-[44px]",children:[r.instanceName&&e.jsxDEV("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-emerald-900/20 text-gray-600 dark:text-emerald-400 rounded text-[9px] font-bold border border-gray-200 dark:border-emerald-500/30 truncate max-w-[120px]",children:r.instanceName},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:275,columnNumber:21},this),r.provider&&e.jsxDEV("span",{className:"px-1.5 py-0.5 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded text-[9px] font-bold border border-blue-100 dark:border-blue-500/30 uppercase",children:r.provider},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:280,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:273,columnNumber:17},this),e.jsxDEV("div",{className:"pl-2 flex gap-2.5",children:[e.jsxDEV("div",{className:"relative shrink-0",children:[r.status==="pending"||r.status==="resolved"?e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center border border-blue-200 dark:border-blue-800/50 group-hover:scale-110 transition-all duration-200 cursor-pointer overflow-hidden shadow-md",onClick:x=>{x.stopPropagation(),u?u(r.id):g(r.id)},title:r.status==="resolved"?"Reabrir atendimento":"Clique para abrir atendimento",children:e.jsxDEV(Me,{size:32,className:"opacity-100 transition-opacity"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:303,columnNumber:25},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:291,columnNumber:23},this):e.jsxDEV("img",{src:r.avatar,alt:r.name,className:"w-10 h-10 rounded-full object-cover border border-emerald-100 dark:border-emerald-900/30 group-hover:scale-105 transition-transform duration-200 shadow-sm",onClick:x=>{x.stopPropagation(),g(r.id)}},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:310,columnNumber:23},this),r.origin==="chatbot"&&e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white p-0.5 rounded-full border-2 border-white dark:border-[#111] shadow-sm",children:e.jsxDEV(je,{size:8},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:324,columnNumber:25},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:323,columnNumber:23},this),r.origin==="campaign"&&e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 bg-purple-500 text-white p-0.5 rounded-full border-2 border-white dark:border-[#111] shadow-sm",children:e.jsxDEV(_e,{size:8},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:329,columnNumber:25},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:328,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:288,columnNumber:19},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-0.5",children:[e.jsxDEV("h3",{className:S("text-sm font-bold truncate pr-2",r.unread>0?"text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:r.name},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:337,columnNumber:23},this),e.jsxDEV("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxDEV("span",{className:S("text-[10px] whitespace-nowrap",r.unread>0?"text-emerald-600 font-bold":"text-gray-400"),children:r.time},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:344,columnNumber:25},this),r.status==="pending"?e.jsxDEV($e,{size:10,className:"text-gray-400"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:349,columnNumber:27},this):e.jsxDEV(ze,{size:10,className:"text-emerald-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:351,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:343,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:336,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400",children:[e.jsxDEV(Ie,{size:9},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:358,columnNumber:25},this),r.phoneNumber]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:357,columnNumber:23},this),e.jsxDEV("div",{className:"flex gap-1.5 px-1",children:[r.hasWallet&&e.jsxDEV(Fe,{size:11,className:"text-blue-500",title:"Possui Saldo"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:365,columnNumber:27},this),r.hasKanban&&e.jsxDEV(Oe,{size:11,className:"text-purple-500",title:"No Kanban"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:368,columnNumber:27},this),r.hasCrm&&e.jsxDEV(He,{size:11,className:"text-orange-500",title:"HistÃ³rico/CRM"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:371,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:363,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:356,columnNumber:21},this),e.jsxDEV("p",{className:S("text-xs truncate mb-1.5",r.unread>0?"text-gray-800 dark:text-gray-200 font-medium":"text-gray-500 dark:text-gray-500"),children:r.lastMessage},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:376,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex flex-wrap gap-1 mt-1",children:r.tags&&r.tags.slice(0,3).map((x,P)=>{const $=typeof x=="string"?x:x.name||"",_=typeof x=="object"&&x.color?x.color:"#6B7280";return e.jsxDEV("span",{className:"px-1.5 py-0.5 rounded-[4px] text-[9px] font-bold border flex items-center gap-1 transition-all",style:{backgroundColor:`${_}15`,color:_,borderColor:`${_}30`},children:[e.jsxDEV("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:_}},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:399,columnNumber:31},this),$]},`${$}-${P}`,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:390,columnNumber:29},this)})},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:384,columnNumber:23},this),r.unread>0&&e.jsxDEV("span",{className:"flex items-center justify-center min-w-[16px] h-[16px] px-1 bg-emerald-500 text-white text-[9px] font-bold rounded-full shadow-sm",children:r.unread},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:407,columnNumber:25},this),r.status==="resolved"&&e.jsxDEV("button",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-[10px] font-bold rounded border border-green-200 dark:border-green-800 hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",onClick:x=>{x.stopPropagation(),u&&u(r.id)},children:"Reabrir"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:413,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:383,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:335,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:286,columnNumber:17},this)]},r.id,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:250,columnNumber:15},this)})},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:237,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/TicketList.tsx",lineNumber:182,columnNumber:5},this)}const xe=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m9 12 2 2 4-4"})),Ne=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M9 11l3 3l8-8"}),n.createElement("path",{d:"m21 21-6.5-6.5"})),fe=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),n.createElement("circle",{cx:"12",cy:"10",r:"3"})),Ze=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"12",cy:"12",r:"1"}),n.createElement("circle",{cx:"12",cy:"5",r:"1"}),n.createElement("circle",{cx:"12",cy:"19",r:"1"})),Ge=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M3 6h18"}),n.createElement("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),n.createElement("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),n.createElement("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),n.createElement("line",{x1:"14",x2:"14",y1:"11",y2:"17"})),Ke=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})),Xe=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M18 6 6 18"}),n.createElement("path",{d:"m6 6 12 12"}));function Je({message:t}){const s=t.from_me,[i,a]=T.useState(!1),[g,u]=T.useState(!1),[C,k]=T.useState(!1),[I,R]=T.useState(t.content),r=T.useRef(null);T.useEffect(()=>{R(t.content)},[t.content]),T.useEffect(()=>{const w=L=>{r.current&&!r.current.contains(L.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const G=async()=>{if(confirm("Tem certeza que deseja apagar esta mensagem?"))try{await O.deleteMessage(t.id),u(!1)}catch{alert("Erro ao apagar mensagem")}},f=()=>{k(!0),u(!1)},x=async()=>{if(I.trim()===t.content){k(!1);return}try{await O.editMessage(t.id,I),k(!1)}catch{alert("Erro ao editar mensagem")}},P=()=>{R(t.content),k(!1)},$=S("relative p-2 sm:p-3 rounded-xl shadow-sm text-sm w-fit max-w-[85%] md:max-w-[70%] break-words backdrop-blur-[2px]",s?"bg-[#d9fdd3]/90 ml-auto rounded-tr-none text-gray-900":"bg-white/90 mr-auto rounded-tl-none text-gray-900"),_=()=>s?e.jsxDEV("div",{className:"flex items-center gap-0.5 ml-1.5 translate-y-[2px]",children:[e.jsxDEV("span",{className:"text-[10px] text-gray-500",children:q(t.timestamp)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:153,columnNumber:9},this),t.status==="sent"&&e.jsxDEV(xe,{size:14,className:"text-gray-400"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:154,columnNumber:39},this),t.status==="delivered"&&e.jsxDEV(Ne,{size:14,className:"text-gray-400"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:155,columnNumber:44},this),t.status==="read"&&e.jsxDEV(Ne,{size:14,className:"text-blue-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:156,columnNumber:39},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:152,columnNumber:7},this):e.jsxDEV("span",{className:"text-[10px] text-gray-400 ml-1",children:q(t.timestamp)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:149,columnNumber:23},this),q=w=>new Date(w).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),B=w=>w?w.startsWith("http")||w.startsWith("blob:")||w.startsWith("data:")?w:`http://127.0.0.1:3002${w}`:"",X=()=>{var w,L;if(C&&t.type==="text")return e.jsxDEV("div",{className:"min-w-[200px]",children:[e.jsxDEV("textarea",{value:I,onChange:z=>R(z.target.value),className:"w-full p-2 text-sm border rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-emerald-500",rows:Math.max(2,I.split(`
`).length),autoFocus:!0},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:177,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsxDEV("button",{onClick:P,className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsxDEV(Xe,{size:16},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:185,columnNumber:101},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:185,columnNumber:13},this),e.jsxDEV("button",{onClick:x,className:"p-1 text-green-500 hover:bg-green-50 rounded",children:e.jsxDEV(xe,{size:16},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:186,columnNumber:103},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:186,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:184,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:176,columnNumber:9},this);switch(t.type){case"text":return e.jsxDEV("p",{className:"whitespace-pre-wrap leading-relaxed",children:t.content},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:194,columnNumber:16},this);case"image":return e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 border border-gray-200/50 dark:border-gray-700/50",children:e.jsxDEV("img",{src:B(t.media_url),alt:"MÃ­dia",className:"w-full h-auto max-h-[300px] object-cover hover:opacity-95 transition-opacity cursor-pointer",onClick:()=>window.open(B(t.media_url),"_blank")},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:200,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:199,columnNumber:13},this),t.content&&e.jsxDEV("p",{className:"mt-1",children:t.content},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:207,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:198,columnNumber:11},this);case"audio":return e.jsxDEV("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsxDEV("audio",{controls:!0,className:"h-8 max-w-[240px]",children:e.jsxDEV("source",{src:B(t.media_url),type:t.media_mimetype||"audio/ogg"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:215,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:214,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:213,columnNumber:11},this);case"video":return e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 border border-gray-200/50 dark:border-gray-700/50 relative",children:e.jsxDEV("video",{controls:!0,className:"w-full h-auto max-h-[300px]",children:[e.jsxDEV("source",{src:B(t.media_url),type:t.media_mimetype},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:225,columnNumber:17},this),"Seu navegador nÃ£o suporta vÃ­deo."]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:224,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:223,columnNumber:13},this),t.content&&e.jsxDEV("p",{className:"mt-1",children:t.content},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:229,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:222,columnNumber:11},this);case"document":const U=(m=>{var E;if(!m)return{color:"bg-blue-100 text-blue-600",label:"DOC"};const c=(E=m.split(".").pop())==null?void 0:E.toLowerCase();switch(c){case"pdf":return{color:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400",label:"PDF"};case"xls":case"xlsx":case"csv":return{color:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",label:"XLS"};case"doc":case"docx":return{color:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",label:"DOC"};case"ppt":case"pptx":return{color:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",label:"PPT"};case"zip":case"rar":return{color:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",label:"ZIP"};case"txt":return{color:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",label:"TXT"};default:return{color:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",label:(c==null?void 0:c.toUpperCase().slice(0,3))||"DOC"}}})(t.media_filename);return e.jsxDEV("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxDEV("div",{className:S("w-10 h-10 rounded-lg flex items-center justify-center transition-colors",U.color),children:e.jsxDEV("span",{className:"text-xs font-bold",children:U.label},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:258,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:257,columnNumber:13},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:t.media_filename||"Documento"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:261,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:t.media_size?`${(t.media_size/1024).toFixed(1)} KB`:"Tamanho desconhecido"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:262,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:260,columnNumber:13},this),e.jsxDEV("a",{href:B(t.media_url),download:t.media_filename||!0,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm font-medium",onClick:m=>{var c;(c=t.media_filename)!=null&&c.endsWith(".bin")},children:"Abrir"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:266,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:256,columnNumber:11},this);case"carousel":try{const m=JSON.parse(t.content);return e.jsxDEV("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar -mx-1 px-1 max-w-[500px]",children:m.map((c,E)=>e.jsxDEV("div",{className:"min-w-[200px] max-w-[200px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm flex flex-col",children:[c.imageUrl&&e.jsxDEV("img",{src:B(c.imageUrl),className:"w-full h-24 object-cover",alt:""},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:291,columnNumber:21},this),e.jsxDEV("div",{className:"p-3 flex-1 flex flex-col",children:[e.jsxDEV("p",{className:"text-sm font-bold truncate text-gray-900 dark:text-gray-100",children:c.title},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:298,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-gray-500 line-clamp-2 mt-1 flex-1",children:c.description},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:299,columnNumber:21},this),c.price&&e.jsxDEV("p",{className:"text-sm font-bold text-emerald-600 mt-2",children:["R$ ",c.price.toFixed(2)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:301,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:297,columnNumber:19},this)]},E,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:289,columnNumber:17},this))},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:287,columnNumber:13},this)}catch{return e.jsxDEV("p",{className:"text-sm italic text-gray-500",children:"MÃ­dia de Carrossel"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:311,columnNumber:18},this)}case"buttons":case"list":try{const m=JSON.parse(t.content);return e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"whitespace-pre-wrap leading-relaxed",children:m.text},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:320,columnNumber:15},this),m.footer&&e.jsxDEV("p",{className:"text-xs text-gray-500",children:m.footer},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:322,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-blue-600 font-medium",children:t.type==="buttons"?"ğŸ“± Mensagem com botÃµes":"ğŸ“‹ Mensagem com lista"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:324,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:319,columnNumber:13},this)}catch{return e.jsxDEV("p",{className:"whitespace-pre-wrap leading-relaxed",children:t.content},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:330,columnNumber:18},this)}case"location":let A=null,H="";try{A=JSON.parse(t.content),H=`https://www.google.com/maps?q=${A.latitude},${A.longitude}`}catch{(w=t.media_url)!=null&&w.includes("maps")?(H=t.media_url,A={name:"LocalizaÃ§Ã£o"}):(L=t.content)!=null&&L.includes("maps")&&(H=t.content,A={name:"LocalizaÃ§Ã£o"})}return H?e.jsxDEV("div",{className:"space-y-2",children:e.jsxDEV("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxDEV(fe,{size:24,className:"text-red-500 flex-shrink-0"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:355,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-bold truncate",children:(A==null?void 0:A.name)||"LocalizaÃ§Ã£o"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:357,columnNumber:19},this),(A==null?void 0:A.address)&&e.jsxDEV("p",{className:"text-xs text-gray-500 truncate",children:A.address},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:358,columnNumber:40},this),e.jsxDEV("a",{href:H,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline flex items-center gap-1 mt-0.5",children:"Ver no Google Maps"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:359,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:356,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:354,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:353,columnNumber:13},this):e.jsxDEV("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxDEV(fe,{size:16,className:"text-red-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:375,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"LocalizaÃ§Ã£o compartilhada"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:376,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:374,columnNumber:11},this);case"sticker":return e.jsxDEV("div",{className:"rounded-lg overflow-hidden max-w-[150px]",children:e.jsxDEV("img",{src:B(t.media_url),alt:"Sticker",className:"w-full h-auto object-contain bg-transparent",onError:m=>{m.currentTarget.style.display="none"}},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:383,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:382,columnNumber:11},this);default:return e.jsxDEV("p",{className:"whitespace-pre-wrap leading-relaxed",children:t.content},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:396,columnNumber:16},this)}};return e.jsxDEV("div",{className:S("flex flex-col mb-2 group",s?"items-end":"items-start"),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[!s&&t.contact_name&&e.jsxDEV("span",{className:"text-[10px] text-gray-600 font-medium mb-0.5 ml-2",children:t.contact_name},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:408,columnNumber:9},this),e.jsxDEV("div",{className:$,children:[s&&!C&&e.jsxDEV("div",{className:"absolute top-1 right-1 z-10 transition-opacity opacity-0 group-hover:opacity-100",children:[e.jsxDEV("button",{onClick:()=>u(!g),className:"text-gray-500 hover:bg-gray-100/50 rounded-full p-1 transition-colors",children:e.jsxDEV(Ze,{size:14},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:421,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:417,columnNumber:13},this),g&&e.jsxDEV("div",{ref:r,className:"absolute right-0 top-6 bg-white dark:bg-[#252525] shadow-lg rounded-lg border border-gray-100 dark:border-[#333] z-50 w-32 py-1 animate-in fade-in zoom-in-95 duration-100",children:[t.type==="text"&&e.jsxDEV("button",{onClick:f,className:"w-full text-left px-3 py-2 text-xs text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-[#333] flex items-center gap-2",children:[e.jsxDEV(Ke,{size:12},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:434,columnNumber:21},this)," Editar"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:430,columnNumber:19},this),e.jsxDEV("button",{onClick:G,className:"w-full text-left px-3 py-2 text-xs text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[e.jsxDEV(Ge,{size:12},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:441,columnNumber:19},this)," Excluir"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:437,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:425,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:416,columnNumber:11},this),X(),!C&&e.jsxDEV("div",{className:"flex justify-end mt-1 select-none",children:_()},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:452,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:413,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/MessageBubble.tsx",lineNumber:401,columnNumber:5},this)}const Ye=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"8",cy:"21",r:"1"}),n.createElement("circle",{cx:"19",cy:"21",r:"1"}),n.createElement("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L23 6H6"})),ue=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.createElement("path",{d:"m9 11 3 3L22 4"})),et=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.createElement("path",{d:"M12 6v6l4 2"})),tt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.createElement("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),n.createElement("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),n.createElement("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})),nt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})),ve=({size:t=16,className:s="",fill:i})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:i||"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),n.createElement("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),n.createElement("line",{x1:"12",x2:"12",y1:"19",y2:"22"})),st=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m22 2-7 20-4-9-9-4Z"}),n.createElement("path",{d:"M22 2 11 13"})),ot=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),n.createElement("path",{d:"M15 3v18"})),pe=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),n.createElement("path",{d:"M21 3v5h-5"}),n.createElement("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),n.createElement("path",{d:"M8 16H3v5"})),ge=({size:t=16,className:s="",fill:i})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:i||"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"})),at=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),n.createElement("circle",{cx:"12",cy:"10",r:"3"})),rt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M3 6h18"}),n.createElement("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),n.createElement("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),n.createElement("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),n.createElement("line",{x1:"14",x2:"14",y1:"11",y2:"17"})),lt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),n.createElement("path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})),Ce=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.createElement("polygon",{points:"10,8 16,12 10,16 10,8"})),it=["ğŸ˜€","ğŸ˜ƒ","ğŸ˜„","ğŸ˜","ğŸ˜†","ğŸ˜…","ğŸ˜‚","ğŸ¤£","ğŸ˜Š","ğŸ˜‡","ğŸ™‚","ğŸ™ƒ","ğŸ˜‰","ğŸ˜Œ","ğŸ˜","ğŸ¥°","ğŸ˜˜","ğŸ˜—","ğŸ˜™","ğŸ˜š","ğŸ˜‹","ğŸ˜›","ğŸ˜","ğŸ˜œ","ğŸ¤ª","ğŸ¤¨","ğŸ§","ğŸ¤“","ğŸ˜","ğŸ¤©","ğŸ¥³","ğŸ˜","ğŸ˜’","ğŸ˜","ğŸ˜”","ğŸ˜Ÿ","ğŸ˜•","ğŸ™","â˜¹ï¸","ğŸ˜®","ğŸ˜¯","ğŸ˜²","ğŸ˜³","ğŸ¥º","ğŸ˜¦","ğŸ˜§","ğŸ˜¨","ğŸ˜°","ğŸ˜¥","ğŸ˜¢","ğŸ˜­","ğŸ˜±","ğŸ˜–","ğŸ˜£","ğŸ˜","ğŸ˜“","ğŸ˜©","ğŸ˜«","ğŸ¥±","ğŸ˜¤","ğŸ˜¡","ğŸ˜ ","ğŸ¤¬","ğŸ˜ˆ","ğŸ‘¿","ğŸ’€","â˜ ï¸","ğŸ’©","ğŸ¤¡","ğŸ‘¹","ğŸ‘º","ğŸ‘»","ğŸ‘½","ğŸ‘¾","ğŸ¤–","ğŸ‘‹","ğŸ¤š","ğŸ–ï¸","âœ‹","ğŸ––","ğŸ‘Œ","ğŸ¤","âœŒï¸","ğŸ¤","ğŸ¤Ÿ","ğŸ¤˜","ğŸ¤™","ğŸ‘ˆ","ğŸ‘‰","ğŸ‘†","ğŸ–•","ğŸ‘‡","â˜ï¸","ğŸ‘","ğŸ‘","âœŠ","ğŸ‘Š","ğŸ¤›","ğŸ¤œ","ğŸ‘","ğŸ™Œ","ğŸ‘","ğŸ¤²","ğŸ¤","ğŸ™","âœï¸","ğŸ’…","ğŸ¤³","ğŸ’ª","ğŸ¦¾","â¤ï¸","ğŸ§¡","ğŸ’›","ğŸ’š","ğŸ’™","ğŸ’œ","ğŸ–¤","ğŸ¤","ğŸ¤","ğŸ’”","â£ï¸","ğŸ’•","ğŸ’","ğŸ’“","ğŸ’—","ğŸ’–","ğŸ’˜","ğŸ’","ğŸ’Ÿ","ğŸ’Œ","ğŸ’¢","ğŸ’£","ğŸ’¤","ğŸ’¥","ğŸ’¦","ğŸ’¨","ğŸ’«","ğŸ’¬","ğŸ—¯ï¸","ğŸ’­","ğŸ’°","ğŸ’µ","ğŸ’³","ğŸ’","ğŸ“ˆ","ğŸ“‰","ğŸ“Š","ğŸ“‹","ğŸ“","ğŸ“","ğŸ“¦","ğŸ·ï¸","ğŸ“¦","ğŸšš","ğŸšš","ğŸ“¦","ğŸ›’","ğŸ›ï¸","ğŸ›ï¸","ğŸ","ğŸ¯","ğŸ“¢","ğŸ””","ğŸ”•","ğŸ“","ğŸ“Œ","ğŸ“","ğŸ“±","âœ‰ï¸","ğŸ“§","âœ…","âŒ","âš ï¸","ğŸš«","â­","âœ¨","ğŸ”¥","ğŸš€","âš¡","ğŸ’¡","ğŸ”","ğŸ†—","ğŸ†•","ğŸ†“","ğŸ†™","ğŸ†“","ğŸ†’","ğŸ†˜","ğŸ“","ğŸš©"];function mt({ticket:t,messages:s,messagesLoading:i,onToggleRightPanel:a,onToggleCart:g,isRightPanelOpen:u,onResolveTicket:C,onReopenTicket:k,onReturnToPending:I,onOpenTicket:R,onOpenSchedule:r,onOpenQuickReplies:G,message:f,setMessage:x,onSendMessage:P}){const[$,_]=n.useState(!1),[q,B]=n.useState(0),[X,w]=n.useState(!1),[L,z]=n.useState(!1),U=n.useRef(null),A=n.useRef(null),H=n.useRef(null),m=n.useRef(null),c=n.useRef([]),E=(h="smooth")=>{setTimeout(()=>{var N;(N=U.current)==null||N.scrollIntoView({behavior:h,block:"end"})},100)};n.useEffect(()=>{E(s.length<=1?"auto":"smooth")},[s]),n.useEffect(()=>{E("auto")},[t]),n.useEffect(()=>{i||E("auto")},[i]),n.useEffect(()=>($?A.current=setInterval(()=>{B(h=>h+1)},1e3):(A.current&&clearInterval(A.current),B(0)),()=>{A.current&&clearInterval(A.current)}),[$]);const D=h=>{const N=Math.floor(h/60),o=h%60;return`${N.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},J=()=>{f.trim()&&P(f.trim())},M=h=>{h.key==="Enter"&&J()},W=h=>{h.preventDefault(),w(!0)},te=()=>{w(!1)},Y=h=>{h.preventDefault(),w(!1);const N=h.dataTransfer.getData("text/plain");N&&x(f+(f?" ":"")+N)},F=()=>{var h;return(h=H.current)==null?void 0:h.click()},ne=h=>{var b;const N=(b=h.target.files)==null?void 0:b[0];if(!N)return;if(console.log("ğŸ“ ChatWindow: Arquivo selecionado"),console.log("   - Nome original:",N.name),console.log("   - Tipo:",N.type),console.log("   - Tamanho:",N.size),N.type.startsWith("audio/")||/\.(mp3|ogg|wav|m4a|webm|opus)$/i.test(N.name)){const y=N.name.split(".").pop()||"mp3",K=new File([N],`voice-message.${y}`,{type:N.type});console.log("ğŸµ ChatWindow: Processando como Ã¡udio"),console.log("   - Nome renomeado:",K.name),console.log("   - Tipo:",K.type),console.log("   - Tamanho:",K.size),P("","audio",K)}else{let y="document";N.type.startsWith("image/")?y="image":N.type.startsWith("video/")&&(y="video"),console.log(`ğŸ“„ ChatWindow: Processando como ${y}`),P("",y,N)}h.target.value=""},le=()=>{const h=localStorage.getItem("chatvendas_lat"),N=localStorage.getItem("chatvendas_lng");if(h&&N){const o=parseFloat(h.replace(",",".")),b=parseFloat(N.replace(",","."));if(isNaN(o)||isNaN(b)){alert("As coordenadas configuradas sÃ£o invÃ¡lidas. Verifique em ConfiguraÃ§Ãµes > Geral.");return}console.log("ğŸ“ Usando localizaÃ§Ã£o configurada:",o,b);const y=JSON.stringify({latitude:o,longitude:b,name:"LocalizaÃ§Ã£o da Empresa"});P(y,"location")}else alert("LocalizaÃ§Ã£o nÃ£o configurada. Por favor, vÃ¡ em ConfiguraÃ§Ãµes > Geral e defina a Latitude e Longitude da empresa.")},se=async()=>{try{const h=await navigator.mediaDevices.getUserMedia({audio:!0}),o=["audio/webm; codecs=opus","audio/webm","audio/ogg; codecs=opus","audio/mp4"].find(y=>MediaRecorder.isTypeSupported(y))||"",b=new MediaRecorder(h,{mimeType:o});m.current=b,c.current=[],b.ondataavailable=y=>c.current.push(y.data),b.onstop=()=>{const y=o.includes("webm")?"webm":o.includes("mp4")?"mp4":"ogg",K=new Blob(c.current,{type:o}),ee=new File([K],`voice-message.${y}`,{type:o});P("","audio",ee),h.getTracks().forEach(Q=>Q.stop())},b.start(),_(!0)}catch(h){console.error("Erro ao acessar microfone:",h),alert("NÃ£o foi possÃ­vel acessar o microfone. Verifique as permissÃµes.")}},oe=(h=!1)=>{m.current&&$&&(h?(m.current.onstop=null,m.current.stop(),m.current.stream.getTracks().forEach(N=>N.stop())):m.current.stop(),_(!1))},ie=h=>{x(f+h),z(!1)};if(!t)return e.jsxDEV("div",{className:"flex-1 flex flex-col items-center justify-center bg-[#f0f2f5] dark:bg-[#0a0a0a] border-b-[6px] border-emerald-500 min-w-0 transition-colors duration-300",children:e.jsxDEV("div",{className:"text-center p-4",children:[e.jsxDEV("div",{className:"w-20 h-20 bg-gray-200 dark:bg-[#1c1c1c] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(ge,{size:32,className:"text-gray-400 dark:text-gray-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:391,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:390,columnNumber:11},this),e.jsxDEV("h2",{className:"text-2xl font-light text-gray-600 dark:text-gray-300 mb-2",children:"ChatVendas Web"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:393,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Selecione um ticket para iniciar o atendimento."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:394,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:389,columnNumber:9},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:388,columnNumber:7},this);const ae=t.status==="resolved"||t.status==="pending";return e.jsxDEV("div",{className:"flex-1 flex flex-col h-full bg-[#efeae2] dark:bg-[#111] relative min-w-0 transition-colors duration-300",children:[e.jsxDEV("div",{className:"absolute inset-0 opacity-60 dark:opacity-10 pointer-events-none",style:{backgroundImage:"url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png')",backgroundRepeat:"repeat",backgroundSize:"400px"}},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:406,columnNumber:7},this),e.jsxDEV("header",{className:"h-[60px] bg-white dark:bg-[#1c1c1c] px-4 py-2 flex items-center justify-between z-10 border-b border-gray-200 dark:border-[#222] shrink-0 transition-colors duration-300",children:[e.jsxDEV("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-[#252525] p-1 rounded-lg transition-colors overflow-hidden mr-2",children:[e.jsxDEV("div",{className:"relative shrink-0",children:[e.jsxDEV("img",{src:t.avatar,alt:t.name,className:"w-10 h-10 rounded-full object-cover"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:418,columnNumber:13},this),t.onlineStatus==="online"&&e.jsxDEV("span",{className:"absolute bottom-0 right-0 block h-2.5 w-2.5 rounded-full ring-2 ring-white dark:ring-[#1c1c1c] bg-green-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:420,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:417,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col min-w-0",children:[e.jsxDEV("span",{className:"text-gray-900 dark:text-gray-100 font-bold text-sm truncate",children:t.name},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:424,columnNumber:13},this),e.jsxDEV("span",{className:"text-emerald-600 dark:text-emerald-400 text-xs truncate font-medium",children:(()=>{const h=t.lastSeen;if(!h)return"Visto por Ãºltimo recentemente";const N=new Date(h),o=new Date,b=o.getTime()-N.getTime(),y=Math.floor(b/6e4);if(y<5)return"Online";if(y<60)return`Visto por Ãºltimo hÃ¡ ${y} min`;const K=N.toDateString()===o.toDateString(),ee=N.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(K)return`Visto por Ãºltimo hoje Ã s ${ee}`;const Q=new Date(o);return Q.setDate(o.getDate()-1),N.toDateString()===Q.toDateString()?`Visto por Ãºltimo ontem Ã s ${ee}`:`Visto por Ãºltimo em ${N.toLocaleDateString()} Ã s ${ee}`})()},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:425,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:423,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:416,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-3 shrink-0",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:g,className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/40 rounded-lg transition-all shadow-sm border border-indigo-100 dark:border-indigo-900/30",title:"Carrinho",children:e.jsxDEV(Ye,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:458,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:457,columnNumber:13},this),t.status==="resolved"?e.jsxDEV("button",{onClick:k,className:"p-2 bg-cyan-50 dark:bg-cyan-900/20 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-100 dark:hover:bg-cyan-900/40 rounded-lg transition-all shadow-sm border border-cyan-100 dark:border-cyan-900/30",title:"Reabrir",children:e.jsxDEV(pe,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:463,columnNumber:17},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:462,columnNumber:15},this):t.status==="pending"?e.jsxDEV("button",{onClick:()=>R(),className:"p-2 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-100 dark:hover:bg-emerald-900/40 rounded-lg transition-all shadow-sm border border-emerald-100 dark:border-emerald-900/30",title:"Iniciar Atendimento",children:e.jsxDEV(Ce,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:467,columnNumber:17},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:466,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:I,className:"p-2 bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 rounded-lg transition-all shadow-sm border border-amber-100 dark:border-amber-900/30",title:"Retornar para Pendente",children:e.jsxDEV(lt,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:472,columnNumber:19},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:471,columnNumber:17},this),e.jsxDEV("button",{onClick:C,className:"p-2 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-lg transition-all shadow-sm border border-green-100 dark:border-green-900/30",title:"Resolver",children:e.jsxDEV(ue,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:475,columnNumber:19},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:474,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:470,columnNumber:15},this),e.jsxDEV("button",{onClick:r,className:"p-2 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/40 rounded-lg transition-all shadow-sm border border-purple-100 dark:border-purple-900/30",title:"Agendar",children:e.jsxDEV(et,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:480,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:479,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:456,columnNumber:11},this),e.jsxDEV("div",{className:"h-6 w-px bg-gray-200 dark:bg-[#333] mx-1 hidden sm:block"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:484,columnNumber:11},this),e.jsxDEV("button",{onClick:a,className:S("p-2 rounded-lg transition-all",u?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"),children:e.jsxDEV(ot,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:495,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:486,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:455,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:415,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-2 sm:p-3 z-10 flex flex-col gap-1 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-[#333] scrollbar-track-transparent",children:[e.jsxDEV("div",{className:"flex justify-center mb-4 mt-1",children:e.jsxDEV("div",{className:"bg-[#ffeecd] dark:bg-yellow-900/20 text-gray-600 dark:text-yellow-200 text-[11px] px-3 py-1.5 rounded-lg shadow-sm text-center max-w-md border border-[#ffeeba] dark:border-yellow-900/30",children:"ğŸ”’ As mensagens sÃ£o protegidas com criptografia de ponta-a-ponta."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:503,columnNumber:11},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:502,columnNumber:9},this),i?e.jsxDEV("div",{className:"flex justify-center items-center py-8",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:510,columnNumber:13},this),e.jsxDEV("span",{className:"ml-2 text-gray-500",children:"Carregando mensagens..."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:511,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:509,columnNumber:11},this):(t==null?void 0:t.status)==="resolved"?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 dark:bg-[#333] rounded-full flex items-center justify-center mb-4",children:e.jsxDEV(ue,{size:32,className:"text-green-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:516,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:515,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300",children:"Atendimento Finalizado"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:518,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm",children:"Reabra o ticket para visualizar a conversa."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:519,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:514,columnNumber:11},this):e.jsxDEV(e.Fragment,{children:s.map(h=>e.jsxDEV(Je,{message:h},h.id,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:524,columnNumber:15},this))},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:522,columnNumber:11},this),e.jsxDEV("div",{ref:U},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:529,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:501,columnNumber:7},this),e.jsxDEV("footer",{className:"bg-[#f0f2f5] dark:bg-[#1c1c1c] px-4 py-3 z-10 border-t border-gray-200 dark:border-[#222] shrink-0 transition-colors duration-300",children:[ae?e.jsxDEV("div",{className:"flex items-center justify-center py-4 bg-white dark:bg-[#252525] rounded-xl border border-dashed border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400 text-sm h-[72px]",children:t.status==="resolved"?e.jsxDEV("button",{onClick:k,className:"flex items-center gap-2 bg-emerald-600 text-white px-8 py-2.5 rounded-full font-bold shadow hover:bg-emerald-700 transition-all transform hover:scale-105",children:[e.jsxDEV(pe,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:541,columnNumber:17},this)," Reabrir Ticket"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:537,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:["Este ticket estÃ¡ pendente.",e.jsxDEV("button",{onClick:()=>R(),className:"ml-2 text-emerald-600 dark:text-emerald-400 font-bold hover:underline flex items-center gap-1",children:[e.jsxDEV(Ce,{size:14},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:547,columnNumber:19},this)," Abrir Ticket"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:546,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:544,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:535,columnNumber:11},this):e.jsxDEV("div",{className:"flex items-end gap-2 max-w-5xl mx-auto",children:$?e.jsxDEV("div",{className:"flex-1 flex items-center gap-3 bg-white dark:bg-[#252525] rounded-xl px-4 py-3 shadow-sm animate-in fade-in duration-200",children:[e.jsxDEV("div",{className:"text-red-500 animate-pulse",children:e.jsxDEV(ve,{size:20,fill:"currentColor"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:557,columnNumber:61},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:557,columnNumber:17},this),e.jsxDEV("span",{className:"flex-1 font-mono text-gray-700 dark:text-gray-200 font-medium",children:D(q)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:558,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>oe(!0),className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsxDEV(rt,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:559,columnNumber:124},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:559,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>oe(!1),className:"text-emerald-500 hover:text-emerald-600 transition-colors",children:e.jsxDEV(ue,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:560,columnNumber:132},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:560,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:556,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex gap-2 pb-2.5",children:[e.jsxDEV("button",{onClick:()=>z(!L),className:S("p-2 rounded-full transition-colors",L?"bg-amber-200 text-amber-700":"bg-amber-50 text-amber-500 hover:bg-amber-100"),title:"Emojis",children:e.jsxDEV(tt,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:575,columnNumber:21},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:567,columnNumber:19},this),e.jsxDEV("button",{onClick:F,className:"p-2 bg-blue-50 text-blue-500 hover:bg-blue-100 rounded-full transition-colors",title:"Anexar",children:e.jsxDEV(nt,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:582,columnNumber:21},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:577,columnNumber:19},this),e.jsxDEV("button",{onClick:G,className:"p-2 bg-yellow-50 text-yellow-600 hover:bg-yellow-100 rounded-full transition-colors",title:"Respostas RÃ¡pidas",children:e.jsxDEV(ge,{size:20,className:"fill-yellow-600"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:585,columnNumber:21},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:584,columnNumber:19},this),e.jsxDEV("button",{onClick:le,className:"p-2 bg-red-50 text-red-500 hover:bg-red-100 rounded-full transition-colors",title:"LocalizaÃ§Ã£o",children:e.jsxDEV(at,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:592,columnNumber:21},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:587,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:566,columnNumber:17},this),e.jsxDEV("input",{type:"file",ref:H,className:"hidden",onChange:ne},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:596,columnNumber:17},this),e.jsxDEV("div",{className:S("flex-1 bg-white dark:bg-[#252525] rounded-xl flex items-center px-4 py-2.5 border shadow-sm min-h-[48px] transition-all",X?"border-emerald-500 ring-2 ring-emerald-100 dark:ring-emerald-900/20 bg-emerald-50/10":"border-white dark:border-[#333] focus-within:border-white dark:focus-within:border-[#444]"),onDragOver:W,onDragLeave:te,onDrop:Y,children:e.jsxDEV("input",{type:"text",placeholder:X?"Solte a resposta aqui...":"Digite '/' para respostas rÃ¡pidas ou sua mensagem...",className:"flex-1 border-none outline-none text-sm bg-transparent placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 min-w-0",value:f,onChange:h=>x(h.target.value),onKeyDown:M,autoFocus:!0},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:615,columnNumber:19},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:604,columnNumber:17},this),e.jsxDEV("div",{className:"pb-1",children:f?e.jsxDEV("button",{onClick:J,className:"bg-emerald-500 hover:bg-emerald-600 text-white p-3 rounded-full shadow-md transition-transform transform hover:scale-105 active:scale-95 flex items-center justify-center",children:e.jsxDEV(st,{size:20,className:"ml-0.5"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:633,columnNumber:23},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:629,columnNumber:21},this):e.jsxDEV("button",{onClick:se,className:"bg-emerald-500 hover:bg-emerald-600 text-white p-3 rounded-full shadow-md transition-transform transform hover:scale-105 active:scale-95 flex items-center justify-center",children:e.jsxDEV(ve,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:640,columnNumber:23},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:636,columnNumber:21},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:627,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:564,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:553,columnNumber:11},this),L&&!$&&e.jsxDEV("div",{className:"max-w-5xl mx-auto px-[38px] mt-3 animate-in slide-in-from-bottom-2 duration-300",children:e.jsxDEV("div",{className:"h-[132px] bg-white dark:bg-[#252525] border border-gray-200 dark:border-[#333] rounded-2xl shadow-inner p-4 overflow-y-auto",children:e.jsxDEV("div",{className:"grid grid-cols-8 sm:grid-cols-10 md:grid-cols-12 gap-3 items-center justify-items-center",children:it.map(h=>e.jsxDEV("button",{onClick:()=>ie(h),className:"text-2xl hover:scale-125 hover:bg-gray-50 dark:hover:bg-[#333] p-2 rounded-xl transition-all duration-150",children:h},h,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:655,columnNumber:19},this))},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:653,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:652,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:651,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:533,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/ChatWindow.tsx",lineNumber:404,columnNumber:5},this)}const de=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m6 9 6 6 6-6"})),dt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"8",cy:"21",r:"1"}),n.createElement("circle",{cx:"19",cy:"21",r:"1"}),n.createElement("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L23 6H6"})),ct=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z"}),n.createElement("path",{d:"M15 3v4a2 2 0 0 0 2 2h4"})),ut=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M19 7V6a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1v-2a2 2 0 0 0-2-2H2"}),n.createElement("path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"})),ht=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}),n.createElement("circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"})),bt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),n.createElement("path",{d:"M12 3v18"})),xt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M18 6 6 18"}),n.createElement("path",{d:"m6 6 12 12"})),Nt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),n.createElement("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})),ft=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),n.createElement("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),n.createElement("path",{d:"M7 3v4a1 1 0 0 0 1 1h8"}));function vt({ticket:t,onOpenCatalog:s,onInsertMessage:i}){const[a,g]=T.useState({notas:!0,carteira:!0,etiquetas:!0,kanban:!0}),[u,C]=T.useState(""),[k,I]=T.useState(0),[R,r]=T.useState([]),[G,f]=T.useState(""),[x,P]=T.useState("lead"),[$,_]=T.useState(!1),[q,B]=T.useState([]),[X,w]=T.useState([]);T.useEffect(()=>{t&&(C(t.notes||""),I(typeof t.walletBalance=="number"?t.walletBalance:parseFloat(t.walletBalance)||0),r(t.tags||[]),P(t.contact_stage||""))},[t]),T.useEffect(()=>{const m=async()=>{try{const E=new Map,D=localStorage.getItem("system_tags");if(D)try{const M=JSON.parse(D);Array.isArray(M)&&M.forEach(W=>{W.name&&W.color&&E.set(W.name,W.color)})}catch{}const J=Array.from(E.entries()).map(([M,W])=>({name:M,color:W})).sort((M,W)=>M.name.localeCompare(W.name));B(J)}catch(E){console.error("Erro ao carregar etiquetas do sistema:",E)}};m();const c=()=>m();return window.addEventListener("tags-updated",c),()=>window.removeEventListener("tags-updated",c)},[]),T.useEffect(()=>{(async()=>{try{const c=await Ve.getStages();w(c)}catch(c){console.error("Erro ao carregar estÃ¡gios kanban:",c)}})()},[]);const L=m=>{g(c=>({...c,[m]:!c[m]}))},z=async()=>{if(t!=null&&t.contact_id){_(!0);try{await O.updateContactStage(t.contact_id,x,u),await O.updateContact(t.contact_id,{notes:u})}catch(m){console.error("Erro ao salvar notas:",m),alert("Erro ao salvar notas.")}finally{_(!1)}}},U=async m=>{const c=m.target.value;if(!c)return;const D=q.find(M=>M.name===c)||{name:c,color:"#6B7280"};if(!R.some(M=>(typeof M=="string"?M:M.name)===D.name)){const M=[...R,D];r(M);try{const W=[];t!=null&&t.contact_id&&W.push(O.updateContact(t.contact_id,{tags:M})),await Promise.all(W)}catch(W){console.error("Erro ao vincular etiqueta:",W)}}},A=async m=>{const c=typeof m=="string"?m:m.name,E=R.filter(D=>(typeof D=="string"?D:D.name)!==c);r(E);try{const D=[];t!=null&&t.contact_id&&D.push(O.updateContact(t.contact_id,{tags:E})),await Promise.all(D)}catch(D){console.error("Erro ao remover etiqueta:",D)}},H=async m=>{const c=m.target.value;if(P(c),t!=null&&t.contact_id)try{await O.updateContactStage(t.contact_id,c,u)}catch(E){console.error("Erro ao atualizar estÃ¡gio:",E)}};return t?e.jsxDEV("div",{className:"w-[350px] h-full bg-white border-l border-gray-200 flex flex-col overflow-y-auto",children:[e.jsxDEV("div",{className:"p-6 border-b border-gray-100 flex flex-col items-center bg-gray-50/50",children:[e.jsxDEV("img",{src:t.avatar,className:"w-20 h-20 rounded-full border-4 border-white shadow-sm mb-3"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:273,columnNumber:9},this),e.jsxDEV("h2",{className:"font-bold text-gray-800 text-lg",children:t.name},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:274,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-gray-500 bg-white px-3 py-1 rounded-full border border-gray-200 mt-1 cursor-pointer hover:bg-gray-50",title:"Copiar",children:[t.phoneNumber," ",e.jsxDEV(Nt,{size:12},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:276,columnNumber:32},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:275,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:272,columnNumber:7},this),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("button",{onClick:s,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-sm transition-all transform hover:scale-[1.02]",children:[e.jsxDEV(dt,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:286,columnNumber:11},this),"Vender Produto"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:282,columnNumber:9},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:281,columnNumber:7},this),e.jsxDEV("div",{className:"border-b border-gray-100",children:[e.jsxDEV("button",{onClick:()=>L("kanban"),className:"w-full px-4 py-3 flex items-center justify-between text-gray-700 hover:bg-gray-50",children:[e.jsxDEV("div",{className:"flex items-center gap-2 font-bold text-sm",children:[e.jsxDEV(bt,{size:18,className:"text-blue-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:295,columnNumber:13},this)," Kanban"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:294,columnNumber:11},this),e.jsxDEV(de,{size:16,className:S("text-gray-400 transition-transform",a.kanban?"rotate-180":"")},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:297,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:293,columnNumber:9},this),a.kanban&&e.jsxDEV("div",{className:"px-4 pb-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxDEV("select",{value:x,onChange:H,className:"w-full p-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsxDEV("option",{value:"",children:"NÃ£o Anexado"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:306,columnNumber:15},this),X.map(m=>e.jsxDEV("option",{value:m.id,children:m.label},m.id,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:308,columnNumber:17},this))]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:301,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:"Alterar o estÃ¡gio move o contato no Kanban."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:311,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:300,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:292,columnNumber:7},this),e.jsxDEV("div",{className:"border-b border-gray-100",children:[e.jsxDEV("button",{onClick:()=>L("etiquetas"),className:"w-full px-4 py-3 flex items-center justify-between text-gray-700 hover:bg-gray-50",children:[e.jsxDEV("div",{className:"flex items-center gap-2 font-bold text-sm",children:[e.jsxDEV(ht,{size:18,className:"text-purple-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:322,columnNumber:13},this)," Etiquetas"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:321,columnNumber:11},this),e.jsxDEV(de,{size:16,className:S("text-gray-400 transition-transform",a.etiquetas?"rotate-180":"")},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:324,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:320,columnNumber:9},this),a.etiquetas&&e.jsxDEV("div",{className:"px-4 pb-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxDEV("div",{className:"flex gap-2 mb-3",children:e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-purple-500 bg-white",onChange:U,value:"",children:[e.jsxDEV("option",{value:"",children:"+ Anexar Etiqueta..."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:335,columnNumber:17},this),q.map(m=>e.jsxDEV("option",{value:m.name,children:m.name},m.name,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:337,columnNumber:19},this))]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:330,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:329,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[R.map((m,c)=>{const E=typeof m=="string"?m:m.name,D=typeof m=="string"?"#6B7280":m.color;return e.jsxDEV("span",{className:"text-white px-2 py-1 rounded-md text-xs font-bold flex items-center gap-1 group shadow-sm",style:{backgroundColor:D},children:[E,e.jsxDEV("button",{onClick:()=>A(m),className:"hover:text-red-200 transition-colors",children:e.jsxDEV(xt,{size:12},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:358,columnNumber:23},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:354,columnNumber:21},this)]},c,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:348,columnNumber:19},this)}),R.length===0&&e.jsxDEV("p",{className:"text-xs text-gray-400 italic",children:"Nenhuma etiqueta."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:363,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:342,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:327,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:319,columnNumber:7},this),e.jsxDEV("div",{className:"border-b border-gray-100",children:[e.jsxDEV("button",{onClick:()=>L("notas"),className:"w-full px-4 py-3 flex items-center justify-between text-gray-700 hover:bg-gray-50",children:[e.jsxDEV("div",{className:"flex items-center gap-2 font-bold text-sm",children:[e.jsxDEV(ct,{size:18,className:"text-yellow-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:374,columnNumber:13},this)," Notas"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:373,columnNumber:11},this),e.jsxDEV(de,{size:16,className:S("text-gray-400 transition-transform",a.notas?"rotate-180":"")},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:376,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:372,columnNumber:9},this),a.notas&&e.jsxDEV("div",{className:"px-4 pb-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxDEV("textarea",{className:"w-full h-32 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-gray-700 resize-none focus:outline-none focus:ring-2 focus:ring-yellow-400 placeholder-yellow-700/50",placeholder:"Escreva observaÃ§Ãµes sobre o cliente...",value:u,onChange:m=>C(m.target.value)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:380,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-end mt-2 items-center gap-2",children:[e.jsxDEV("p",{className:"text-[10px] text-gray-400 italic",children:"Vinculado ao Kanban"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:387,columnNumber:15},this),e.jsxDEV("button",{onClick:z,disabled:$,className:"text-xs bg-yellow-100 text-yellow-700 px-3 py-1.5 rounded-md font-bold hover:bg-yellow-200 transition-colors flex items-center gap-1 disabled:opacity-50",children:[e.jsxDEV(ft,{size:12},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:389,columnNumber:17},this)," ",$?"Salvando...":"Salvar"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:388,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:386,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:379,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:371,columnNumber:7},this),e.jsxDEV("div",{className:"border-b border-gray-100",children:[e.jsxDEV("button",{onClick:()=>L("carteira"),className:"w-full px-4 py-3 flex items-center justify-between text-gray-700 hover:bg-gray-50",children:[e.jsxDEV("div",{className:"flex items-center gap-2 font-bold text-sm",children:[e.jsxDEV(ut,{size:18,className:"text-blue-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:400,columnNumber:13},this)," Carteira"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:399,columnNumber:11},this),e.jsxDEV(de,{size:16,className:S("text-gray-400 transition-transform",a.carteira?"rotate-180":"")},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:402,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:398,columnNumber:9},this),a.carteira&&e.jsxDEV("div",{className:"px-4 pb-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxDEV("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-3 border border-blue-100 mb-2",children:[e.jsxDEV("span",{className:"text-xs font-bold text-blue-700 uppercase",children:"Saldo DisponÃ­vel"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:408,columnNumber:15},this),e.jsxDEV("span",{className:"text-lg font-bold text-blue-800",children:["R$ ",k.toFixed(2)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:409,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:407,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2 items-center"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:412,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:405,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:397,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:270,columnNumber:5},this):e.jsxDEV("div",{className:"w-[350px] h-full bg-white border-l border-gray-200 flex flex-col items-center justify-center text-gray-400 p-8 text-center",children:e.jsxDEV("p",{children:"Selecione um ticket para ver as informaÃ§Ãµes do cliente."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:264,columnNumber:9},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/RightPanel.tsx",lineNumber:263,columnNumber:7},this)}const pt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M18 6 6 18"}),n.createElement("path",{d:"m6 6 12 12"})),gt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})),Ct=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"8",cy:"21",r:"1"}),n.createElement("circle",{cx:"19",cy:"21",r:"1"}),n.createElement("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L23 6H6"})),we=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),n.createElement("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})),wt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),n.createElement("path",{d:"M12 9v4"}),n.createElement("path",{d:"m12 17 .01 0"}));function Et({onClose:t,onAddToCart:s,onSendCatalog:i}){const[a,g]=n.useState([]);return n.useEffect(()=>{g(be.getAll());const u=()=>g(be.getAll());return window.addEventListener("product-update",u),()=>window.removeEventListener("product-update",u)},[]),e.jsxDEV("div",{className:"w-[380px] h-full bg-white border-r border-gray-200 flex flex-col shadow-2xl z-30 absolute left-0 top-0 bottom-0 animate-in slide-in-from-left duration-300",children:[e.jsxDEV("div",{className:"h-[60px] bg-gradient-to-r from-emerald-600 to-emerald-500 px-4 flex items-center justify-between text-white shrink-0 shadow-md",children:[e.jsxDEV("div",{className:"flex items-center gap-2 font-bold text-lg",children:[e.jsxDEV(we,{size:22},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:67,columnNumber:11},this),"CatÃ¡logo"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("button",{onClick:t,className:"hover:bg-white/20 p-1.5 rounded-lg transition-colors",children:e.jsxDEV(pt,{size:22},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:71,columnNumber:11},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:70,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:65,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:e.jsxDEV("div",{className:"space-y-5",children:a.map(u=>e.jsxDEV("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 group",children:[e.jsxDEV("div",{className:"h-48 w-full bg-gray-100 relative overflow-hidden",children:[u.images&&u.images.length>0?e.jsxDEV("img",{src:u.images[0],alt:u.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:82,columnNumber:19},this):e.jsxDEV("div",{className:"w-full h-full flex items-center justify-center text-gray-400 bg-gray-200",children:e.jsxDEV(we,{size:32},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:89,columnNumber:21},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:88,columnNumber:19},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:93,columnNumber:17},this),e.jsxDEV("div",{className:"absolute bottom-3 left-3 text-white",children:e.jsxDEV("p",{className:"font-bold text-lg shadow-black/50 drop-shadow-md",children:["R$ ",u.price.toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:96,columnNumber:19},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:95,columnNumber:17},this),e.jsxDEV("div",{className:"absolute top-3 right-3 flex gap-1",children:u.stock<=0?e.jsxDEV("div",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md",children:"ESGOTADO"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:103,columnNumber:21},this):u.stock<=u.minStock?e.jsxDEV("div",{className:"bg-orange-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md flex items-center gap-1",children:[e.jsxDEV(wt,{size:10},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:108,columnNumber:23},this)," Poucas Unidades"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:107,columnNumber:21},this):null},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:101,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:79,columnNumber:15},this),e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-1",children:[e.jsxDEV("h3",{className:"font-bold text-gray-800 text-lg leading-tight",children:u.name},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:116,columnNumber:19},this),e.jsxDEV("span",{className:"text-xs text-gray-400",children:["Est: ",u.stock]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:117,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:115,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mb-4 leading-relaxed line-clamp-2",children:u.description},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:120,columnNumber:17},this),u.variations&&u.variations.length>0&&e.jsxDEV("div",{className:"flex gap-1 mb-3 flex-wrap",children:[u.variations.slice(0,3).map(C=>e.jsxDEV("span",{className:"text-[10px] bg-gray-100 px-1.5 py-0.5 rounded text-gray-600 border border-gray-200",children:[C.color," - ",C.size]},C.id,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:128,columnNumber:23},this)),u.variations.length>3&&e.jsxDEV("span",{className:"text-[10px] text-gray-400",children:"..."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:132,columnNumber:55},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:126,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("button",{onClick:()=>i(u),className:"flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-semibold text-emerald-700 bg-emerald-50 border border-emerald-100 hover:bg-emerald-100 transition-colors",children:[e.jsxDEV(gt,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:141,columnNumber:21},this),"Enviar CatÃ¡logo"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:137,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>s(u),disabled:u.stock<=0,className:"flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-700 hover:to-emerald-600 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 active:translate-y-0 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsxDEV(Ct,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:149,columnNumber:21},this),u.stock<=0?"IndisponÃ­vel":"Adicionar"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:144,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:136,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:114,columnNumber:15},this)]},u.id,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:78,columnNumber:13},this))},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:76,columnNumber:9},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:75,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CatalogPanel.tsx",lineNumber:64,columnNumber:5},this)}const yt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M18 6 6 18"}),n.createElement("path",{d:"m6 6 12 12"})),kt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M3 6h18"}),n.createElement("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),n.createElement("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),n.createElement("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),n.createElement("line",{x1:"14",x2:"14",y1:"11",y2:"17"})),jt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m6 9 6 6 6-6"})),Ee=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),n.createElement("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),n.createElement("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),n.createElement("path",{d:"M2 7h20"}),n.createElement("path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7"})),_t=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M14 18V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"}),n.createElement("path",{d:"M15 18H9"}),n.createElement("path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"}),n.createElement("circle",{cx:"17",cy:"18",r:"2"}),n.createElement("circle",{cx:"7",cy:"18",r:"2"})),At=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m12 19-7-7 7-7"}),n.createElement("path",{d:"M19 12H5"})),Dt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),n.createElement("circle",{cx:"12",cy:"10",r:"3"})),ye=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.createElement("path",{d:"m9 11 3 3L22 4"})),Vt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"m22 2-7 20-4-9-9-4Z"}),n.createElement("path",{d:"M22 2 11 13"})),he=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),n.createElement("line",{x1:"2",x2:"22",y1:"10",y2:"10"})),ke=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),n.createElement("path",{d:"M3 6h18"}),n.createElement("path",{d:"M16 10a4 4 0 0 1-8 0"})),Pt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("rect",{width:"20",height:"12",x:"2",y:"6",rx:"2"}),n.createElement("circle",{cx:"12",cy:"12",r:"2"}),n.createElement("path",{d:"M6 12h.01M18 12h.01"})),Lt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}),n.createElement("rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}),n.createElement("rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}),n.createElement("path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}),n.createElement("path",{d:"M21 21v.01"}),n.createElement("path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}),n.createElement("path",{d:"M3 12h.01"}),n.createElement("path",{d:"M12 3h.01"}),n.createElement("path",{d:"M12 16v.01"}),n.createElement("path",{d:"M16 12h1"}),n.createElement("path",{d:"M21 12v.01"}),n.createElement("path",{d:"M12 21v-1"})),Mt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M19 7V6a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1v-2a2 2 0 0 0-2-2H2"}),n.createElement("path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"})),Wt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}));function St({onClose:t,items:s,freight:i,discount:a,ticketId:g,customerName:u,ticket:C,onUpdateFreight:k,onUpdateDiscount:I,onRemoveItem:R,onUpdateQty:r,onClearCart:G}){const[f,x]=n.useState("cart"),[P,$]=n.useState(null),[_,q]=n.useState(null),[B,X]=n.useState(""),[w,L]=n.useState(""),[z,U]=n.useState(i>0?i.toString():""),[A,H]=n.useState(a>0?a.toString():""),[m,c]=n.useState(!1),[E,D]=n.useState(""),[J,M]=n.useState(null);n.useEffect(()=>{g&&(console.log(`ğŸ”„ CartPanel: Buscando detalhes do ticket ${g}...`),O.getTicket(g).then(o=>{console.log("âœ… CartPanel: Ticket carregado:",o),M(o)}).catch(o=>console.error("âŒ Erro ao buscar ticket no CartPanel:",o)))},[g]),n.useEffect(()=>{U(i>0?i.toString():""),H(a>0?a.toString():"")},[i,a]);const W=o=>{const b=o.target.value;U(b);const y=parseFloat(b.replace(",","."));k(isNaN(y)?0:y)},te=o=>{const b=o.target.value;H(b);const y=parseFloat(b.replace(",","."));I(isNaN(y)?0:y)},Y=s.reduce((o,b)=>o+b.price*b.qty,0),F=Math.max(0,Y+i-a),ne={cep:"74000-000",street:"Av. Paulista",number:"1000",neighborhood:"Bela Vista",city:"SÃ£o Paulo",uf:"SP",complement:"Apto 101"},le=()=>{if(s.length===0)return alert("Adicione itens ao carrinho primeiro.");x("delivery-selection")},se=o=>{$(o),x(o==="delivery"?"address":"payment")},oe=()=>{x("payment")},ie=async()=>{if(!_)return alert("Selecione uma forma de pagamento.");const o={items:s,totals:{subtotal:Y,freight:i,discount:a,total:F},delivery:{method:P||"pickup",address:P==="delivery"?ne:null},payment:{method:_,changeFor:_==="cash"?parseFloat(B):void 0},customerName:u||"Cliente Visitante",ticketId:g||void 0,createdAt:new Date().toISOString()};x("processing");try{const b=await Pe.createOrder(o);b.success&&(L(b.orderId),x("success"))}catch{alert("Erro ao processar venda. Tente novamente."),x("payment")}},ae=async()=>{var ee;if(s.length===0)return alert("Carrinho vazio!");const o=J||C;console.log("ğŸ“¦ DEBUG CartPanel - Ticket alvo:",o);let b=(o==null?void 0:o.phone)||(o==null?void 0:o.contact_phone)||(o==null?void 0:o.contactPhone)||((ee=o==null?void 0:o.contact)==null?void 0:ee.phone);if(!b&&(o!=null&&o.name)&&/^\d+$/.test(o.name)&&(b=o.name),!b&&(o!=null&&o.whatsapp_id)&&(b=o.whatsapp_id.split("@")[0]),console.log("ğŸ“± DEBUG CartPanel - Telefone identificado:",b),!b)if(m){if(!E)return alert("Por favor, digite o nÃºmero do telefone.");b=E.replace(/\D/g,"")}else{console.warn("Telefone do contato nÃ£o identificado, ativando entrada manual."),c(!0),D((o==null?void 0:o.name)||(o==null?void 0:o.contact_name)||"");return}if(!b)return alert("OperaÃ§Ã£o cancelada: Nenhum telefone vÃ¡lido fornecido.");const K=`*Resumo do Pedido:*

${s.map(Q=>`${Q.qty}x ${Q.name} - R$ ${Q.price.toFixed(2)}`).join(`
`)}

Subtotal: R$ ${Y.toFixed(2)}
Frete: R$ ${i.toFixed(2)}
Desconto: - R$ ${a.toFixed(2)}
*Total: R$ ${F.toFixed(2)}*`;try{await O.sendQuickMessage({phoneNumber:b,messageType:"buttons",content:{text:K,footer:"Confirme seu pedido abaixo",buttons:[{id:"confirm_order",text:"âœ… Fechar Pedido",type:"reply"}]}}),alert("Resumo com botÃ£o enviado para o cliente!")}catch(Q){console.error("Erro ao enviar resumo:",Q),alert("Erro ao enviar resumo. Verifique o console.")}},h=()=>{switch(f){case"cart":return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h3",{className:"flex items-center gap-2 font-bold text-gray-800 mb-3 text-sm uppercase tracking-wide",children:["Itens no Carrinho (",s.length,")"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:358,columnNumber:15},this),s.length===0?e.jsxDEV("div",{className:"text-center py-8 text-gray-400 bg-white rounded-lg border border-dashed border-gray-200",children:[e.jsxDEV(ke,{size:32,className:"mx-auto mb-2 opacity-50"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:364,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm",children:"Seu carrinho estÃ¡ vazio."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:365,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:363,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-3",children:s.map(o=>e.jsxDEV("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm flex items-center gap-3",children:[o.images&&o.images.length>0?e.jsxDEV("img",{src:o.images[0],alt:o.name,className:"w-14 h-14 rounded-md object-cover bg-gray-100"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:372,columnNumber:25},this):e.jsxDEV("div",{className:"w-14 h-14 rounded-md bg-gray-100 flex items-center justify-center text-gray-400",children:e.jsxDEV(ke,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:379,columnNumber:27},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:378,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h4",{className:"font-medium text-gray-800 text-sm truncate",children:o.name},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:383,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-500 text-xs",children:["R$ ",o.price.toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:384,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:382,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-gray-600 font-medium bg-gray-50 rounded px-2 py-1 border border-gray-100",children:[e.jsxDEV("button",{onClick:()=>r(o.id,-1),className:"text-gray-400 hover:text-emerald-600 w-4",children:"-"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:388,columnNumber:27},this),e.jsxDEV("span",{children:o.qty},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:389,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>r(o.id,1),className:"text-gray-400 hover:text-emerald-600 w-4",children:"+"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:390,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:387,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>R(o.id),className:"text-red-300 hover:text-red-500 p-1",children:e.jsxDEV(kt,{size:16},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:393,columnNumber:27},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:392,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:386,columnNumber:23},this)]},o.id,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:370,columnNumber:21},this))},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:368,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:357,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4 mb-6 bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Frete (R$)"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:404,columnNumber:17},this),e.jsxDEV("input",{type:"text",placeholder:"0,00",value:z,onChange:W,className:"w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:405,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:403,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Desconto (R$)"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:411,columnNumber:17},this),e.jsxDEV("input",{type:"text",placeholder:"0,00",value:A,onChange:te,className:"w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 outline-none"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:412,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:410,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:402,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:356,columnNumber:11},this);case"delivery-selection":return e.jsxDEV("div",{className:"flex flex-col gap-4 mt-4 animate-in fade-in duration-300",children:[e.jsxDEV("h3",{className:"text-lg font-bold text-gray-800 text-center mb-2",children:"Como o cliente vai receber?"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:424,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>se("pickup"),className:"group flex items-center gap-4 p-4 bg-white border border-gray-200 rounded-xl hover:border-emerald-500 hover:bg-emerald-50 transition-all shadow-sm",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center group-hover:bg-emerald-100 group-hover:text-emerald-600",children:e.jsxDEV(Ee,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:427,columnNumber:17},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:426,columnNumber:15},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h4",{className:"font-bold text-gray-800",children:"Retirar no Local"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:430,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Cliente busca na loja"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:431,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:429,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:425,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>se("delivery"),className:"group flex items-center gap-4 p-4 bg-white border border-gray-200 rounded-xl hover:border-emerald-500 hover:bg-emerald-50 transition-all shadow-sm",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center group-hover:bg-emerald-100 group-hover:text-emerald-600",children:e.jsxDEV(_t,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:436,columnNumber:17},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:435,columnNumber:15},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h4",{className:"font-bold text-gray-800",children:"Para Entregar"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:439,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Motoboy ou Transportadora"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:440,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:438,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:434,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:423,columnNumber:11},this);case"address":return e.jsxDEV("div",{className:"mt-4 space-y-4 animate-in fade-in duration-300",children:[e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg flex gap-2 text-yellow-800 text-sm",children:[e.jsxDEV(Dt,{size:16,className:"shrink-0 mt-0.5"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:450,columnNumber:15},this),e.jsxDEV("p",{children:"EndereÃ§o vinculado ao cadastro do cliente."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:451,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:449,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-3 opacity-75 pointer-events-none",children:[e.jsxDEV("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxDEV("div",{className:"col-span-1",children:[e.jsxDEV("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"CEP"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:456,columnNumber:19},this),e.jsxDEV("input",{type:"text",defaultValue:ne.cep,className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:457,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:455,columnNumber:17},this),e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Cidade/UF"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:460,columnNumber:19},this),e.jsxDEV("input",{type:"text",defaultValue:`${ne.city}/${ne.uf}`,className:"w-full bg-gray-100 border border-gray-200 rounded-lg px-3 py-2 text-sm",readOnly:!0},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:461,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:459,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:454,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Rua"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:465,columnNumber:17},this),e.jsxDEV("input",{type:"text",defaultValue:ne.street,className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:466,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:464,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:448,columnNumber:11},this);case"payment":return e.jsxDEV("div",{className:"mt-4 space-y-4 animate-in fade-in duration-300",children:[e.jsxDEV("div",{className:"text-center mb-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Valor Total a Pagar"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:476,columnNumber:15},this),e.jsxDEV("h2",{className:"text-3xl font-bold text-emerald-600",children:["R$ ",F.toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:477,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:475,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("button",{onClick:()=>q("pix"),className:S("p-4 rounded-xl border flex flex-col items-center gap-2 transition-all",_==="pix"?"bg-emerald-50 border-emerald-500 text-emerald-700":"bg-white border-gray-200 hover:bg-gray-50 text-gray-600"),children:[e.jsxDEV(Lt,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:482,columnNumber:17},this)," ",e.jsxDEV("span",{className:"text-sm font-bold",children:"PIX"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:482,columnNumber:38},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:481,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>q("credit_card"),className:S("p-4 rounded-xl border flex flex-col items-center gap-2 transition-all",_==="credit_card"?"bg-emerald-50 border-emerald-500 text-emerald-700":"bg-white border-gray-200 hover:bg-gray-50 text-gray-600"),children:[e.jsxDEV(he,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:485,columnNumber:17},this)," ",e.jsxDEV("span",{className:"text-sm font-bold",children:"CartÃ£o"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:485,columnNumber:42},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:484,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>q("cash"),className:S("p-4 rounded-xl border flex flex-col items-center gap-2 transition-all",_==="cash"?"bg-emerald-50 border-emerald-500 text-emerald-700":"bg-white border-gray-200 hover:bg-gray-50 text-gray-600"),children:[e.jsxDEV(Pt,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:488,columnNumber:17},this)," ",e.jsxDEV("span",{className:"text-sm font-bold",children:"Dinheiro"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:488,columnNumber:40},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:487,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>q("debit_card"),className:S("p-4 rounded-xl border flex flex-col items-center gap-2 transition-all",_==="debit_card"?"bg-emerald-50 border-emerald-500 text-emerald-700":"bg-white border-gray-200 hover:bg-gray-50 text-gray-600"),children:[e.jsxDEV(Mt,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:491,columnNumber:17},this)," ",e.jsxDEV("span",{className:"text-sm font-bold",children:"DÃ©bito"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:491,columnNumber:38},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:490,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:480,columnNumber:13},this),_==="cash"&&e.jsxDEV("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100 mt-4 animate-in fade-in",children:[e.jsxDEV("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Precisa de troco para quanto?"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:498,columnNumber:17},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:500,columnNumber:19},this),e.jsxDEV("input",{type:"number",placeholder:"0,00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",value:B,onChange:o=>X(o.target.value)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:501,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:499,columnNumber:17},this),B&&parseFloat(B)>F&&e.jsxDEV("p",{className:"text-sm font-bold text-emerald-600 mt-2 text-right",children:["Troco: R$ ",(parseFloat(B)-F).toFixed(2)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:510,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:497,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:474,columnNumber:11},this);case"processing":return e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-center p-6 animate-in fade-in",children:[e.jsxDEV(Wt,{size:48,className:"text-emerald-600 animate-spin mb-4"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:522,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-bold text-gray-800",children:"Processando Venda..."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:523,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"Atualizando estoque e financeiro."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:524,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:521,columnNumber:11},this);case"success":return e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-center p-6 animate-in zoom-in duration-300",children:[e.jsxDEV("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-6 animate-bounce",children:e.jsxDEV(ye,{size:48},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:532,columnNumber:15},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:531,columnNumber:13},this),e.jsxDEV("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Venda Realizada!"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:534,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500 mb-1",children:["Pedido ",w]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:535,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-400 mb-8",children:"Estoque atualizado e lanÃ§amento financeiro criado."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:536,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>{G&&G(),t()},className:"bg-gray-800 text-white px-8 py-3 rounded-lg font-medium hover:bg-gray-900 transition-colors",children:"Fechar Carrinho"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:537,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:530,columnNumber:11},this)}},N=()=>{if(f==="success"||f==="processing")return null;if(f==="cart")return e.jsxDEV("div",{className:"bg-white p-4 border-t border-gray-200 shrink-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:m?e.jsxDEV("div",{className:"mb-4 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg text-sm text-yellow-800 mb-2",children:[e.jsxDEV("p",{className:"font-bold flex items-center gap-2",children:"âš ï¸ Telefone nÃ£o identificado"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:557,columnNumber:17},this),e.jsxDEV("p",{children:"O sistema nÃ£o encontrou o nÃºmero deste contato. Por favor, confirme abaixo para enviar:"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:558,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:556,columnNumber:15},this),e.jsxDEV("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Telefone (Whatsapp)"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:560,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("input",{type:"text",value:E,onChange:b=>D(b.target.value),placeholder:"5511999999999",className:"flex-1 bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none",autoFocus:!0},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:562,columnNumber:17},this),e.jsxDEV("button",{onClick:ae,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-700 transition-colors",children:"Enviar"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:570,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>c(!1),className:"bg-gray-200 text-gray-600 px-3 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:e.jsxDEV(yt,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:580,columnNumber:19},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:576,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:561,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:555,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-1",children:[e.jsxDEV("span",{className:"text-xs font-medium text-gray-400",children:"Subtotal:"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:587,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:["R$ ",Y.toFixed(2)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:588,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:586,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("span",{className:"text-sm font-bold text-gray-700",children:"Total a pagar:"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:591,columnNumber:17},this),e.jsxDEV("span",{className:"text-2xl font-bold text-emerald-600",children:["R$ ",F.toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:592,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:590,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("button",{onClick:ae,disabled:s.length===0,className:"w-full bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsxDEV(Vt,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:597,columnNumber:19},this)," Enviar resumo"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:596,columnNumber:17},this),e.jsxDEV("button",{onClick:le,disabled:s.length===0,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-colors shadow-sm flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsxDEV(he,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:600,columnNumber:19},this)," Finalizar venda"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:599,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:595,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:585,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:553,columnNumber:9},this);const o=()=>{f==="delivery-selection"&&x("cart"),f==="address"&&x("delivery-selection"),f==="payment"&&x(P==="delivery"?"address":"delivery-selection")};return e.jsxDEV("div",{className:"bg-white p-4 border-t border-gray-200 shrink-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:o,className:"px-4 py-3 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50",children:e.jsxDEV(At,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:621,columnNumber:13},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:620,columnNumber:11},this),f==="delivery-selection"?e.jsxDEV("div",{className:"flex-1 flex items-center justify-center text-gray-400 text-sm",children:"Selecione uma opÃ§Ã£o acima"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:625,columnNumber:13},this):f==="address"?e.jsxDEV("button",{onClick:oe,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-colors shadow-sm",children:"Confirmar EndereÃ§o"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:627,columnNumber:13},this):e.jsxDEV("button",{onClick:ie,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg transition-colors shadow-sm flex items-center justify-center gap-2",children:[e.jsxDEV(ye,{size:18},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:632,columnNumber:15},this)," Confirmar Pagamento"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:631,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:619,columnNumber:9},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:618,columnNumber:7},this)};return e.jsxDEV("div",{className:"w-[380px] h-full bg-gray-50 border-l border-gray-200 flex flex-col shadow-2xl z-20 absolute right-0 top-0 bottom-0 animate-in slide-in-from-right duration-300",children:[e.jsxDEV("div",{className:"h-[60px] bg-emerald-600 px-4 flex items-center justify-between text-white shrink-0 shadow-md z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-3 font-bold text-lg",children:[f==="cart"?e.jsxDEV(Ee,{size:22},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:644,columnNumber:30},this):e.jsxDEV("span",{className:"bg-white/20 p-1 rounded-full",children:e.jsxDEV(he,{size:16},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:645,columnNumber:60},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:645,columnNumber:13},this),e.jsxDEV("span",{children:[f==="cart"&&"Carrinho",f==="delivery-selection"&&"Entrega",f==="address"&&"EndereÃ§o",f==="payment"&&"Pagamento",f==="processing"&&"Processando",f==="success"&&"ConcluÃ­do"]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:647,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:643,columnNumber:9},this),e.jsxDEV("button",{onClick:t,className:"hover:bg-emerald-700 p-1.5 rounded-lg transition-colors",children:e.jsxDEV(jt,{size:24},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:657,columnNumber:11},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:656,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:642,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 relative",children:h()},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:661,columnNumber:7},this),N()]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/CartPanel.tsx",lineNumber:641,columnNumber:5},this)}const Bt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"11",cy:"11",r:"8"}),n.createElement("path",{d:"m21 21-4.35-4.35"})),Rt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})),Tt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"}),n.createElement("path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"}),n.createElement("path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"}),n.createElement("path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"})),It=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M14 18V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"}),n.createElement("path",{d:"M15 18H9"}),n.createElement("path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"}),n.createElement("circle",{cx:"17",cy:"18",r:"2"}),n.createElement("circle",{cx:"7",cy:"18",r:"2"})),$t=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),n.createElement("line",{x1:"2",x2:"22",y1:"10",y2:"10"})),zt=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M18 6 6 18"}),n.createElement("path",{d:"m6 6 12 12"})),Ft=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("circle",{cx:"9",cy:"12",r:"1"}),n.createElement("circle",{cx:"9",cy:"5",r:"1"}),n.createElement("circle",{cx:"9",cy:"19",r:"1"}),n.createElement("circle",{cx:"15",cy:"12",r:"1"}),n.createElement("circle",{cx:"15",cy:"5",r:"1"}),n.createElement("circle",{cx:"15",cy:"19",r:"1"})),Ot=({size:t=16,className:s=""})=>n.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:s},n.createElement("path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z"}),n.createElement("path",{d:"M15 3v4a2 2 0 0 0 2 2h4"})),Ht=({icon:t,title:s,command:i,description:a,onInsert:g,onSend:u})=>{const C=k=>{k.dataTransfer.setData("text/plain",a),k.dataTransfer.effectAllowed="copy"};return n.createElement("div",{draggable:!0,onDragStart:C,onClick:()=>u(a),className:"p-4 bg-white dark:bg-[#252525] rounded-xl border border-gray-100 dark:border-[#333] hover:bg-emerald-50 dark:hover:bg-emerald-900/10 hover:border-emerald-200 dark:hover:border-emerald-800 cursor-grab active:cursor-grabbing transition-all mb-3 group relative shadow-sm hover:shadow-md"},n.createElement("div",{className:"absolute right-3 top-4 opacity-0 group-hover:opacity-100 text-gray-400"},n.createElement(Ft,{size:16})),n.createElement("div",{className:"flex justify-between items-start mb-2"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(t,{size:20,className:"text-emerald-500"}),n.createElement("span",{className:"font-bold text-gray-800 dark:text-gray-100 text-sm"},s)),n.createElement("span",{className:"text-[10px] bg-gray-100 dark:bg-[#333] text-gray-500 px-2 py-0.5 rounded-full font-mono mr-5"},i)),n.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed group-hover:text-gray-700 dark:group-hover:text-gray-300"},a))};function qt({onClose:t,onInsertMessage:s,onSendMessage:i}){const[a,g]=n.useState(""),C=[{icon:Rt,title:"PromoÃ§Ã£o Exclusiva!",command:"/promo",description:"ğŸ‰ Grande oferta! [Produto] com [X]% de desconto por tempo limitado!"},{icon:Tt,title:"Boas-vindas!",command:"/ola",description:"Seja bem-vindo(a) ao nosso suporte! Como podemos tornar seu dia melhor?"},{icon:It,title:"Rastrear Pedido",command:"/rastrear",description:"Para consultar seu pedido, por favor, insira o cÃ³digo de rastreamento."},{icon:$t,title:"OpÃ§Ãµes de Pagamento",command:"/pagar",description:"Aceitamos CartÃ£o, Pix e Boleto. Qual prefere? Parcelamos em atÃ© 12x!"}].filter(k=>k.title.toLowerCase().includes(a.toLowerCase())||k.command.toLowerCase().includes(a.toLowerCase()));return e.jsxDEV("div",{className:"w-full h-full bg-white dark:bg-[#1c1c1c] flex flex-col transition-colors duration-300",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-100 dark:border-[#222] flex items-center justify-between bg-gray-50/50 dark:bg-[#1c1c1c]",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Ot,{size:20,className:"text-emerald-500"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:136,columnNumber:21},this),e.jsxDEV("h2",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Respostas RÃ¡pidas"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:137,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:135,columnNumber:17},this),e.jsxDEV("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-[#252525] rounded-full transition-colors text-gray-400",children:e.jsxDEV(zt,{size:20},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:143,columnNumber:21},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:139,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:134,columnNumber:13},this),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Bt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:150,columnNumber:21},this),e.jsxDEV("input",{type:"text",placeholder:"Buscar respostas...",value:a,onChange:k=>g(k.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-100 dark:bg-[#252525] rounded-xl text-sm border-none focus:ring-2 focus:ring-emerald-500/50 outline-none text-gray-900 dark:text-gray-100 transition-all"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:151,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:149,columnNumber:17},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:148,columnNumber:13},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto px-4 pb-4 custom-scrollbar",children:e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider mb-3",children:"Dica: Clique ou arraste para o chat"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:164,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-1",children:[C.map((k,I)=>e.jsxDEV(Ht,{...k,onInsert:s,onSend:i},I,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:169,columnNumber:29},this)),C.length===0&&e.jsxDEV("div",{className:"text-center py-12",children:e.jsxDEV("p",{className:"text-gray-400 text-sm",children:"Nenhuma resposta encontrada."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:178,columnNumber:33},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:177,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:167,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:163,columnNumber:17},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:162,columnNumber:13},this),e.jsxDEV("div",{className:"p-4 border-t border-gray-100 dark:border-[#222]",children:e.jsxDEV("button",{className:"w-full py-3 bg-gray-50 dark:bg-[#252525] text-gray-600 dark:text-gray-400 rounded-xl text-sm font-bold border border-dashed border-gray-300 dark:border-[#333] hover:bg-gray-100 dark:hover:bg-[#333] transition-all",children:"+ Configurar Respostas"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:187,columnNumber:17},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:186,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/components/QuickRepliesPanel.tsx",lineNumber:132,columnNumber:9},this)}const Ut=()=>(console.log("[Security] Validating Atendimentos Module Integrity..."),!0),Qt=t=>{const s=t.contact_name||"",i=t.contact_phone||"",g=!s||s.startsWith("Contato ")||s.replace(/\D/g,"")===i.replace(/\D/g,"")?i||"Contato sem nome":s;return{id:t.id,name:g,avatar:t.contact_avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(g)}&background=059669&color=fff`,phoneNumber:i,lastMessage:t.last_message||"Sem mensagens",time:t.last_message_time?new Date(t.last_message_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",unread:t.unread_count||0,status:t.status==="closed"?"resolved":t.status,onlineStatus:"offline",department:t.department||"Geral",tags:typeof t.contact_tags=="string"?JSON.parse(t.contact_tags||"[]"):t.contact_tags||[],origin:t.origin||"organic",instanceName:t.instance_name,provider:t.instance_provider,hasWallet:(t.contact_total_spent||0)>0,hasKanban:!!t.contact_stage&&t.contact_stage!=="lead",hasCrm:!!t.contact_tags&&t.contact_tags!=="[]",notes:t.contact_notes||"",walletBalance:t.contact_total_spent||0,contact_id:t.contact_id,contact_stage:t.contact_stage,lastSeen:t.contact_last_seen}};function rn(){Ae();const t=De(),[s,i]=n.useState([]),[a,g]=n.useState(null),[u,C]=n.useState([]),[k,I]=n.useState(!0),[R,r]=n.useState(!1),[G,f]=n.useState({}),[x,P]=n.useState("open"),[$,_]=n.useState(!1),[q,B]=n.useState(!1),[X,w]=n.useState({}),L=n.useMemo(()=>a&&G[a]||"default",[a,G]),z=l=>{a&&f(d=>{const v=d[a]||"default",p=typeof l=="function"?l(v):l;return{...d,[a]:p}})},U=n.useMemo(()=>a?X[a]||{items:[],freight:0,discount:0}:{items:[],freight:0,discount:0},[a,X]),A=U.items,H=U.freight,m=U.discount,c=l=>{a&&w(d=>{const v=d[a]||{items:[],freight:0,discount:0},p=typeof l=="function"?l(v):l;return{...d,[a]:{...v,...p}}})},E=l=>c({freight:l}),D=l=>c({discount:l}),J=()=>{a&&(w(l=>{const d={...l};return delete d[a],d}),z("default"))},[M,W]=n.useState("");n.useEffect(()=>{Ut(),te();const l=j=>{console.log("ğŸ“¨ Nova mensagem recebida via WebSocket:",j),te(),a===j.ticketId&&Y(j.ticketId,!0)},d=j=>{console.log("ğŸ« Novo ticket recebido via WebSocket:",j),te()},v=j=>{console.log("ğŸ“ Ticket atualizado via WebSocket:",j),te()},p=j=>{console.log("ğŸ—‘ï¸ Ticket deletado via WebSocket:",j),a===j.ticketId&&(j.mergedInto?(console.log(`ğŸ”„ Ticket mesclado para: ${j.mergedInto}`),g(j.mergedInto)):g(null)),te()},V=j=>{console.log("âœï¸ Mensagem editada via WebSocket:",j),a===j.ticketId&&C(ce=>ce.map(me=>me.id===j.message.id?{...me,content:j.message.content}:me))},re=j=>{console.log("ğŸ—‘ï¸ Mensagem deletada via WebSocket:",j),C(ce=>ce.filter(me=>me.id!==j.messageId))};return Z.on("newMessage",l),Z.on("newTicket",d),Z.on("ticketUpdated",v),Z.on("ticketStatusUpdated",v),Z.on("ticketDeleted",p),Z.on("messageUpdated",V),Z.on("messageDeleted",re),()=>{Z.off("newMessage",l),Z.off("newTicket",d),Z.off("ticketUpdated",v),Z.off("ticketStatusUpdated",v),Z.off("ticketDeleted",p),Z.off("messageUpdated",V),Z.off("messageDeleted",re)}},[a]),n.useEffect(()=>{a?Y(a):C([])},[a]);const te=async()=>{try{s.length===0&&I(!0);const d=(await O.getTickets({limit:50})).data.map(Qt);i(d);const v=t.state;if(v!=null&&v.ticketId){const p=d.find(V=>V.id===v.ticketId);p&&(g(p.id),p.status!==x&&P(p.status),window.history.replaceState({},document.title))}else if(!a&&d.length>0){const p=d.filter(j=>j.status===x),V=p.find(j=>j.unread>0),re=p[0];V?g(V.id):re&&g(re.id)}}catch(l){console.error("Erro ao carregar tickets:",l)}finally{I(!1)}},Y=async(l,d=!1)=>{try{d||r(!0);const v=await O.getMessages(l,{limit:100});C(v.data)}catch(v){console.error("Erro ao carregar mensagens:",v),d||C([])}finally{d||r(!1)}},F=s.find(l=>l.id===a)||null,ne=l=>{a&&(c(d=>{const v=d.items.find(V=>V.id===l.id);let p;return v?p=d.items.map(V=>V.id===l.id?{...V,qty:V.qty+1}:V):p=[...d.items,{...l,qty:1}],{items:p}}),z("cart"))},le=l=>{c(d=>({items:d.items.filter(v=>v.id!==l)}))},se=(l,d)=>{c(v=>({items:v.items.map(p=>{if(p.id===l){const V=Math.max(1,p.qty+d);return{...p,qty:V}}return p})}))},oe=()=>{z(l=>l==="default"?"none":"default")},ie=()=>{z(l=>l==="cart"?"default":"cart")},ae=()=>{z(l=>l==="quick-replies"?"none":"quick-replies")},h=async()=>{if(a)try{await O.updateTicketStatus(a,"closed"),i(l=>l.map(d=>d.id===a?{...d,status:"resolved"}:d))}catch(l){console.error("Erro ao resolver ticket:",l)}},N=async()=>{if(a)try{await O.updateTicketStatus(a,"open"),i(l=>l.map(d=>d.id===a?{...d,status:"open"}:d)),P("open")}catch(l){console.error("Erro ao reabrir ticket:",l)}},o=async()=>{if(a)try{await O.updateTicketStatus(a,"pending"),i(l=>l.map(d=>d.id===a?{...d,status:"pending"}:d)),P("pending")}catch(l){console.error("Erro ao retornar ticket para pendente:",l)}},b=async l=>{const d=l||a;if(d)try{await O.updateTicketStatus(d,"open"),i(v=>v.map(p=>p.id===d?{...p,status:"open"}:p)),g(d),P("open"),console.log('âœ… Ticket aberto e aba alterada para "Aberto"')}catch(v){console.error("Erro ao abrir ticket:",v)}},y=l=>{console.log("Dados do Agendamento:",l),alert("Agendamento confirmado!")},K=l=>{W(d=>d+(d?" ":"")+l)},ee=async l=>{var d;if(!(!a||!F))try{const v=V=>V?V.startsWith("http")||V.startsWith("blob:")||V.startsWith("data:")?V:`http://127.0.0.1:3002${V}`:"",p={title:l.name,description:l.description,imageUrl:v((d=l.images)==null?void 0:d[0]),price:l.price,buttons:[{id:`prod_${l.id}_buy`,text:"Comprar Agora"}]};await Q(JSON.stringify([p]),"carousel")}catch(v){console.error("Erro ao enviar catÃ¡logo:",v)}},Q=async(l,d="text",v)=>{if(!(!a||!F))try{const p=await O.getTicket(a);await O.sendMessage({instanceId:p.instance_id,contactId:p.contact_id,ticketId:a,type:d,content:l,media:v}),await Y(a),d==="text"&&W("")}catch(p){console.error("Erro ao enviar mensagem:",p),alert("Erro ao enviar mensagem. Verifique a conexÃ£o.")}};return k&&s.length===0?e.jsxDEV("div",{className:"flex h-full w-full bg-white items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:473,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:"Carregando atendimentos..."},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:474,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:472,columnNumber:9},this)},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:471,columnNumber:7},this):e.jsxDEV("div",{className:"flex h-full w-full bg-white relative overflow-hidden",children:[e.jsxDEV(Le,{isOpen:q,onClose:()=>B(!1),onConfirm:y},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:482,columnNumber:7},this),e.jsxDEV("div",{className:"relative h-full flex-shrink-0 hidden md:block",children:[e.jsxDEV(Qe,{tickets:s,activeTab:x,onTabChange:P,selectedTicketId:a,onSelectTicket:g,onOpenTicket:b},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:490,columnNumber:9},this),$&&e.jsxDEV(Et,{onClose:()=>_(!1),onAddToCart:ne,onSendCatalog:ee},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:500,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:489,columnNumber:7},this),e.jsxDEV(mt,{ticket:F,messages:u,messagesLoading:R,onToggleRightPanel:oe,onToggleCart:ie,isRightPanelOpen:L!=="none",onResolveTicket:h,onReopenTicket:N,onReturnToPending:o,onOpenTicket:b,onOpenSchedule:()=>B(!0),onOpenQuickReplies:ae,message:M,setMessage:W,onSendMessage:Q},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:509,columnNumber:7},this),e.jsxDEV("div",{className:S("relative h-full flex-shrink-0 transition-all duration-300 ease-in-out border-l border-gray-200",L==="none"?"w-0 overflow-hidden border-none":"w-[350px]"),children:[L==="default"&&e.jsxDEV(vt,{ticket:F,onOpenCatalog:()=>_(!0),onInsertMessage:K},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:533,columnNumber:11},this),L==="cart"&&e.jsxDEV(St,{onClose:()=>z("default"),items:A,freight:H,discount:m,ticketId:a,customerName:F==null?void 0:F.name,ticket:F,onUpdateFreight:E,onUpdateDiscount:D,onRemoveItem:le,onUpdateQty:se,onClearCart:J},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:541,columnNumber:11},this),L==="quick-replies"&&e.jsxDEV(qt,{onClose:()=>z("none"),onInsertMessage:K,onSendMessage:Q},void 0,!1,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:558,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:528,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Chatvendas_new/src/modules/Atendimentos/page.tsx",lineNumber:481,columnNumber:5},this)}export{rn as default};
