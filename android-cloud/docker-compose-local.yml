# Docker Compose para Easypanel - SEM GitHub
# Use este se o repositÃ³rio for privado

services:
  # API de Gerenciamento
  android-api:
    image: node:20-alpine
    working_dir: /app
    
    command: sh -c "npm install && node server.js"
    
    ports:
      - "3011:3011"
    
    environment:
      NODE_ENV: production
      PORT: 3011
      DOMAIN: ${DOMAIN:-localhost}
    
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./api:/app
    
    restart: unless-stopped
    
    networks:
      - android-network

  # Android Emulator 1
  android-1:
    image: budtmo/docker-android:emulator_13.0
    
    privileged: true
    
    ports:
      - "5900:5900"
      - "6080:6080"
      - "5555:5555"
    
    environment:
      EMULATOR_DEVICE: "Samsung Galaxy S10"
      EMULATOR_WIDTH: "720"
      EMULATOR_HEIGHT: "1520"
      WEB_VNC: "true"
      VNC_PASSWORD: "chatvendas123"
      EMULATOR_ARGS: "-gpu swiftshader_indirect -no-snapshot -noaudio -memory 4096"
      TZ: "America/Sao_Paulo"
    
    volumes:
      - android-1-data:/data
    
    restart: unless-stopped
    
    networks:
      - android-network
    
    healthcheck:
      test: ["CMD", "adb", "devices"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  android-1-data:

networks:
  android-network:
    driver: bridge

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“‹ INSTRUÃ‡Ã•ES:
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# Este docker-compose NÃƒO usa GitHub, entÃ£o funciona com repos privados!
#
# 1ï¸âƒ£ No Easypanel:
#    - Edite o Docker Compose
#    - Delete tudo
#    - Cole este arquivo
#    - Salve
#
# 2ï¸âƒ£ Criar arquivos da API:
#    - No Easypanel, vÃ¡ em "Files" ou "File Manager"
#    - Crie pasta: api/
#    - Crie arquivo: api/package.json (copie o conteÃºdo)
#    - Crie arquivo: api/server.js (copie o conteÃºdo)
#
# 3ï¸âƒ£ Deploy:
#    - Clique em "Deploy"
#    - Aguarde 2-3 minutos
#
# 4ï¸âƒ£ Teste:
#    http://seu-servidor:3011/health
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
