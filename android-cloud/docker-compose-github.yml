# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Docker Compose para Easypanel - Usando GitHub
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 
# Este arquivo usa o repositÃ³rio do ChatVendas no GitHub
# NÃ£o precisa criar um repositÃ³rio separado!
#
# âš ï¸ IMPORTANTE: Troque "SEU-USUARIO/chatvendas" pelo seu repositÃ³rio
#
# Exemplo:
#   Se seu repo Ã©: https://github.com/joao/meu-chatvendas
#   Troque para: https://github.com/joao/meu-chatvendas.git#main:android-cloud/api
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
  # API de Gerenciamento
  android-api:
    # Build direto do GitHub (subpasta android-cloud/api)
    build:
      context: https://github.com/SEU-USUARIO/chatvendas.git#main:android-cloud/api
      dockerfile: Dockerfile
    
    ports:
      - "3011:3011"
    
    environment:
      NODE_ENV: production
      PORT: 3011
      DOMAIN: ${DOMAIN:-localhost}
    
    volumes:
      # Acesso ao Docker do host (para criar containers)
      - /var/run/docker.sock:/var/run/docker.sock:ro
    
    restart: unless-stopped
    
    networks:
      - android-network

  # Android Emulator 1 (Exemplo inicial)
  android-1:
    image: budtmo/docker-android:emulator_13.0
    
    privileged: true
    
    ports:
      - "5900:5900"   # VNC
      - "6080:6080"   # noVNC WebSocket
      - "5555:5555"   # ADB
    
    environment:
      # Dispositivo
      EMULATOR_DEVICE: "Samsung Galaxy S10"
      
      # ResoluÃ§Ã£o (formato celular)
      EMULATOR_WIDTH: "720"
      EMULATOR_HEIGHT: "1520"
      
      # VNC
      WEB_VNC: "true"
      VNC_PASSWORD: "chatvendas123"
      
      # Performance
      EMULATOR_ARGS: "-gpu swiftshader_indirect -no-snapshot -noaudio -memory 4096"
      
      # Timezone
      TZ: "America/Sao_Paulo"
    
    volumes:
      - android-1-data:/data
    
    restart: unless-stopped
    
    networks:
      - android-network
    
    healthcheck:
      test: ["CMD", "adb", "devices"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  android-1-data:

networks:
  android-network:
    driver: bridge

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“‹ INSTRUÃ‡Ã•ES DE USO:
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# 1ï¸âƒ£ TROQUE na linha 23:
#    https://github.com/SEU-USUARIO/chatvendas.git#main:android-cloud/api
#                      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
#                            â”‚          â”‚      â”‚          â”‚
#                       seu usuario   repo  branch    subpasta
#
#    Exemplos:
#    - https://github.com/joao/chatvendas.git#main:android-cloud/api
#    - https://github.com/maria/whatsapp-bot.git#master:android-cloud/api
#
# 2ï¸âƒ£ Se seu branch Ã© "master" em vez de "main", troque:
#    ...chatvendas.git#master:android-cloud/api
#
# 3ï¸âƒ£ No Easypanel:
#    a) New Project â†’ android-cloud
#    b) Add Service â†’ Docker Compose
#    c) Cole este arquivo (com suas modificaÃ§Ãµes)
#    d) Environment â†’ Adicione: DOMAIN=seu-dominio.com
#    e) Deploy!
#
# 4ï¸âƒ£ Aguarde 2-3 minutos (vai baixar imagens)
#
# 5ï¸âƒ£ Teste:
#    http://seu-servidor:3011/health
#    
#    Deve retornar:
#    {"status":"ok","mode":"cloud"}
#
# 6ï¸âƒ£ Configure no ChatVendas (backend/.env):
#    CLOUD_ANDROID_API=http://seu-servidor:3011
#
# 7ï¸âƒ£ Reinicie o backend:
#    npm run electron:dev
#
# 8ï¸âƒ£ Teste no ChatVendas:
#    - Abra Android Emulator
#    - Clique em "Criar InstÃ¢ncia"
#    - Android aparece no frame!
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ› PROBLEMAS COMUNS:
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# âŒ "repository not found"
#    â†’ Verifique se o repositÃ³rio Ã© pÃºblico
#    â†’ Ou configure SSH key no Easypanel
#
# âŒ "context not found"
#    â†’ Verifique se a pasta android-cloud/ existe no repo
#    â†’ Verifique o nome do branch (main ou master)
#
# âŒ "Cannot connect to Docker daemon"
#    â†’ ssh root@servidor
#    â†’ systemctl start docker
#
# âŒ "Port already in use"
#    â†’ Mude as portas:
#      ports:
#        - "3012:3011"  # Mude 3011 para 3012
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
